<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 2 Introducción a R | Introducción a Ciencia de Datos y Machine Learning</title>
  <meta name="description" content="Capítulo 2 Introducción a R | Introducción a Ciencia de Datos y Machine Learning" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 2 Introducción a R | Introducción a Ciencia de Datos y Machine Learning" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Capítulo 2 Introducción a R | Introducción a Ciencia de Datos y Machine Learning" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 2 Introducción a R | Introducción a Ciencia de Datos y Machine Learning" />
  
  <meta name="twitter:description" content="Capítulo 2 Introducción a R | Introducción a Ciencia de Datos y Machine Learning" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="conceptos-de-ciencia-de-datos.html"/>
<link rel="next" href="visualización.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><img src="img/amat-logo.png" width="280"></a></li|
|:-:|  
<center>Introducción a Ciencia de Datos y Machine Learning</center>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>BIENVENIDA</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objetivo"><i class="fa fa-check"></i>Objetivo</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#instructores"><i class="fa fa-check"></i>Instructores</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#alcances-del-curso"><i class="fa fa-check"></i>Alcances del curso</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#temario"><i class="fa fa-check"></i>Temario:</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#duración-y-evaluación-del-curso"><i class="fa fa-check"></i>Duración y evaluación del curso</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recursos-y-dinámica-de-clase"><i class="fa fa-check"></i>Recursos y dinámica de clase</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html"><i class="fa fa-check"></i><b>1</b> Conceptos de Ciencia de Datos</a>
<ul>
<li class="chapter" data-level="1.1" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#qué-es-ciencia-de-datos"><i class="fa fa-check"></i><b>1.1</b> ¿Qué es Ciencia de Datos?</a>
<ul>
<li class="chapter" data-level="" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#definiendo-conceptos"><i class="fa fa-check"></i>Definiendo conceptos:</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#objetivos"><i class="fa fa-check"></i><b>1.2</b> Objetivos</a></li>
<li class="chapter" data-level="1.3" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#requisitos"><i class="fa fa-check"></i><b>1.3</b> Requisitos</a></li>
<li class="chapter" data-level="1.4" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#aplicaciones"><i class="fa fa-check"></i><b>1.4</b> Aplicaciones</a></li>
<li class="chapter" data-level="1.5" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#tipos-de-algoritmos"><i class="fa fa-check"></i><b>1.5</b> Tipos de algoritmos</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#aprendizaje-supervisado"><i class="fa fa-check"></i><b>1.5.1</b> Aprendizaje supervisado</a></li>
<li class="chapter" data-level="1.5.2" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#aprendizaje-no-supervisado"><i class="fa fa-check"></i><b>1.5.2</b> Aprendizaje no supervisado</a></li>
<li class="chapter" data-level="1.5.3" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#aprendizaje-por-refuerzo"><i class="fa fa-check"></i><b>1.5.3</b> Aprendizaje por refuerzo</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="conceptos-de-ciencia-de-datos.html"><a href="conceptos-de-ciencia-de-datos.html#ciclo-de-un-proyecto"><i class="fa fa-check"></i><b>1.6</b> Ciclo de un proyecto</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introducción-a-r.html"><a href="introducción-a-r.html"><i class="fa fa-check"></i><b>2</b> Introducción a R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introducción-a-r.html"><a href="introducción-a-r.html#cómo-obtener-r"><i class="fa fa-check"></i><b>2.1</b> ¿Cómo obtener <em>R</em>?</a></li>
<li class="chapter" data-level="2.2" data-path="introducción-a-r.html"><a href="introducción-a-r.html#qué-es-rstudio"><i class="fa fa-check"></i><b>2.2</b> ¿Qué es RStudio?</a></li>
<li class="chapter" data-level="2.3" data-path="introducción-a-r.html"><a href="introducción-a-r.html#lectura-de-datos"><i class="fa fa-check"></i><b>2.3</b> Lectura de datos</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introducción-a-r.html"><a href="introducción-a-r.html#archivos-csv"><i class="fa fa-check"></i><b>2.3.1</b> Archivos <em>csv</em></a></li>
<li class="chapter" data-level="2.3.2" data-path="introducción-a-r.html"><a href="introducción-a-r.html#archivos-txt"><i class="fa fa-check"></i><b>2.3.2</b> Archivos txt</a></li>
<li class="chapter" data-level="2.3.3" data-path="introducción-a-r.html"><a href="introducción-a-r.html#archivos-xls-y-xlsx"><i class="fa fa-check"></i><b>2.3.3</b> Archivos <em>xls</em> y <em>xlsx</em></a></li>
<li class="chapter" data-level="2.3.4" data-path="introducción-a-r.html"><a href="introducción-a-r.html#archivos-json"><i class="fa fa-check"></i><b>2.3.4</b> Archivos json</a></li>
<li class="chapter" data-level="2.3.5" data-path="introducción-a-r.html"><a href="introducción-a-r.html#archivos-rds"><i class="fa fa-check"></i><b>2.3.5</b> Archivos rds</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introducción-a-r.html"><a href="introducción-a-r.html#consultas-de-datos"><i class="fa fa-check"></i><b>2.4</b> Consultas de datos</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introducción-a-r.html"><a href="introducción-a-r.html#seleccionar-columnas"><i class="fa fa-check"></i><b>2.4.1</b> Seleccionar columnas</a></li>
<li class="chapter" data-level="2.4.2" data-path="introducción-a-r.html"><a href="introducción-a-r.html#filtrar-observaciones"><i class="fa fa-check"></i><b>2.4.2</b> Filtrar observaciones</a></li>
<li class="chapter" data-level="2.4.3" data-path="introducción-a-r.html"><a href="introducción-a-r.html#ordenar-registros"><i class="fa fa-check"></i><b>2.4.3</b> Ordenar registros</a></li>
<li class="chapter" data-level="2.4.4" data-path="introducción-a-r.html"><a href="introducción-a-r.html#agregar-modificar"><i class="fa fa-check"></i><b>2.4.4</b> Agregar / Modificar</a></li>
<li class="chapter" data-level="2.4.5" data-path="introducción-a-r.html"><a href="introducción-a-r.html#resumen-estadístico"><i class="fa fa-check"></i><b>2.4.5</b> Resumen estadístico</a></li>
<li class="chapter" data-level="2.4.6" data-path="introducción-a-r.html"><a href="introducción-a-r.html#agrupamiento"><i class="fa fa-check"></i><b>2.4.6</b> Agrupamiento</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introducción-a-r.html"><a href="introducción-a-r.html#orden-y-estructura"><i class="fa fa-check"></i><b>2.5</b> Orden y estructura</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introducción-a-r.html"><a href="introducción-a-r.html#pivote-horizontal"><i class="fa fa-check"></i><b>2.5.1</b> Pivote horizontal</a></li>
<li class="chapter" data-level="2.5.2" data-path="introducción-a-r.html"><a href="introducción-a-r.html#pivote-vertical"><i class="fa fa-check"></i><b>2.5.2</b> Pivote vertical</a></li>
<li class="chapter" data-level="2.5.3" data-path="introducción-a-r.html"><a href="introducción-a-r.html#unión-de-columnas"><i class="fa fa-check"></i><b>2.5.3</b> Unión de columnas</a></li>
<li class="chapter" data-level="2.5.4" data-path="introducción-a-r.html"><a href="introducción-a-r.html#separador-de-columnas"><i class="fa fa-check"></i><b>2.5.4</b> Separador de columnas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visualización.html"><a href="visualización.html"><i class="fa fa-check"></i><b>3</b> Visualización</a>
<ul>
<li class="chapter" data-level="3.1" data-path="visualización.html"><a href="visualización.html#eda-análisis-exploratorio-de-datos"><i class="fa fa-check"></i><b>3.1</b> EDA: Análisis Exploratorio de Datos</a></li>
<li class="chapter" data-level="3.2" data-path="visualización.html"><a href="visualización.html#geda-análisis-exploratorio-de-datos-gráficos"><i class="fa fa-check"></i><b>3.2</b> GEDA: Análisis Exploratorio de Datos Gráficos</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="visualización.html"><a href="visualización.html#lo-que-no-se-debe-hacer"><i class="fa fa-check"></i><b>3.2.1</b> Lo que no se debe hacer…</a></li>
<li class="chapter" data-level="3.2.2" data-path="visualización.html"><a href="visualización.html#principios-de-visualización"><i class="fa fa-check"></i><b>3.2.2</b> Principios de visualización</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="visualización.html"><a href="visualización.html#ggplot"><i class="fa fa-check"></i><b>3.3</b> Ggplot</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="visualización.html"><a href="visualización.html#estéticas"><i class="fa fa-check"></i><b>3.3.1</b> Estéticas</a></li>
<li class="chapter" data-level="3.3.2" data-path="visualización.html"><a href="visualización.html#objetos-geométricos-o-capas"><i class="fa fa-check"></i><b>3.3.2</b> Objetos geométricos o capas</a></li>
<li class="chapter" data-level="3.3.3" data-path="visualización.html"><a href="visualización.html#facetas"><i class="fa fa-check"></i><b>3.3.3</b> Facetas</a></li>
<li class="chapter" data-level="3.3.4" data-path="visualización.html"><a href="visualización.html#más-sobre-estéticas"><i class="fa fa-check"></i><b>3.3.4</b> Más sobre estéticas</a></li>
<li class="chapter" data-level="3.3.5" data-path="visualización.html"><a href="visualización.html#quick-view"><i class="fa fa-check"></i><b>3.3.5</b> Quick View</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="visualización.html"><a href="visualización.html#análisis-univariado"><i class="fa fa-check"></i><b>3.4</b> Análisis univariado</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="visualización.html"><a href="visualización.html#variables-numéricas"><i class="fa fa-check"></i><b>3.4.1</b> Variables numéricas</a></li>
<li class="chapter" data-level="3.4.2" data-path="visualización.html"><a href="visualización.html#variables-nominalescategóricas"><i class="fa fa-check"></i><b>3.4.2</b> Variables nominales/categóricas</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="visualización.html"><a href="visualización.html#análisis-multivariado"><i class="fa fa-check"></i><b>3.5</b> Análisis multivariado</a></li>
<li class="chapter" data-level="3.6" data-path="visualización.html"><a href="visualización.html#visualización-interactiva"><i class="fa fa-check"></i><b>3.6</b> Visualización interactiva</a>
<ul>
<li class="chapter" data-level="" data-path="visualización.html"><a href="visualización.html#warning"><i class="fa fa-check"></i>¡ Warning !</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="visualización.html"><a href="visualización.html#reporte-interactivos"><i class="fa fa-check"></i><b>3.7</b> Reporte interactivos</a></li>
</ul></li>
<li class="part"><span><b>Parte 2: Machine Learning</b></span></li>
<li class="chapter" data-level="4" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html"><i class="fa fa-check"></i><b>4</b> Introducción a Machine Learning</a>
<ul>
<li class="chapter" data-level="4.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#análisis-supervisado-vs-no-supervisado"><i class="fa fa-check"></i><b>4.1</b> Análisis Supervisado vs No supervisado</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#regresión-vs-clasificación"><i class="fa fa-check"></i><b>4.1.1</b> Regresión vs clasificación</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#sesgo-vs-varianza"><i class="fa fa-check"></i><b>4.2</b> Sesgo vs varianza</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#balance-entre-sesgo-y-varianza-o-trade-off"><i class="fa fa-check"></i><b>4.2.1</b> Balance entre sesgo y varianza o Trade-off</a></li>
<li class="chapter" data-level="4.2.2" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#error-total"><i class="fa fa-check"></i><b>4.2.2</b> Error total</a></li>
<li class="chapter" data-level="4.2.3" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#overfitting"><i class="fa fa-check"></i><b>4.2.3</b> Overfitting</a></li>
<li class="chapter" data-level="4.2.4" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#underfitting"><i class="fa fa-check"></i><b>4.2.4</b> Underfitting</a></li>
<li class="chapter" data-level="4.2.5" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#error-irreducible"><i class="fa fa-check"></i><b>4.2.5</b> Error irreducible</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#orden-y-estructura-de-proyecto"><i class="fa fa-check"></i><b>4.3</b> Orden y estructura de proyecto</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#plantilla-de-estructura-proyecto"><i class="fa fa-check"></i><b>4.3.1</b> Plantilla de estructura proyecto</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#partición-de-datos"><i class="fa fa-check"></i><b>4.4</b> Partición de datos</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#métodos-comunes-para-particionar-datos"><i class="fa fa-check"></i><b>4.4.1</b> Métodos comunes para particionar datos</a></li>
<li class="chapter" data-level="4.4.2" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#conjunto-de-validación"><i class="fa fa-check"></i><b>4.4.2</b> Conjunto de validación</a></li>
<li class="chapter" data-level="4.4.3" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#leave-one-out-cross-validation"><i class="fa fa-check"></i><b>4.4.3</b> Leave-one-out cross-validation</a></li>
<li class="chapter" data-level="4.4.4" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#v-fold-cross-validation"><i class="fa fa-check"></i><b>4.4.4</b> V Fold Cross Validation</a></li>
<li class="chapter" data-level="4.4.5" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#medidas-de-ajuste"><i class="fa fa-check"></i><b>4.4.5</b> Medidas de ajuste</a></li>
<li class="chapter" data-level="4.4.6" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#validación-cruzada-para-series-de-tiempo"><i class="fa fa-check"></i><b>4.4.6</b> Validación cruzada para series de tiempo</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#pre-procesamiento-de-datos"><i class="fa fa-check"></i><b>4.5</b> Pre-procesamiento de datos</a></li>
<li class="chapter" data-level="4.6" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#ingeniería-de-datos"><i class="fa fa-check"></i><b>4.6</b> Ingeniería de datos</a></li>
<li class="chapter" data-level="4.7" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#recetas"><i class="fa fa-check"></i><b>4.7</b> Recetas</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#pasos-y-estructura-de-recetas"><i class="fa fa-check"></i><b>4.7.1</b> Pasos y estructura de recetas</a></li>
<li class="chapter" data-level="4.7.2" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#imputaciones"><i class="fa fa-check"></i><b>4.7.2</b> Imputaciones</a></li>
<li class="chapter" data-level="4.7.3" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#agregar-o-modificar-columnas"><i class="fa fa-check"></i><b>4.7.3</b> Agregar o modificar columnas</a></li>
<li class="chapter" data-level="4.7.4" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#interacciones"><i class="fa fa-check"></i><b>4.7.4</b> Interacciones</a></li>
<li class="chapter" data-level="4.7.5" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#transformaciones-generales"><i class="fa fa-check"></i><b>4.7.5</b> Transformaciones generales</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#datos-y-tipos-de-modelos"><i class="fa fa-check"></i><b>4.8</b> Datos y tipos de modelos</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#separación-de-los-datos"><i class="fa fa-check"></i><b>4.8.1</b> Separación de los datos</a></li>
<li class="chapter" data-level="4.8.2" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#definición-de-la-receta"><i class="fa fa-check"></i><b>4.8.2</b> Definición de la receta</a></li>
<li class="chapter" data-level="4.8.3" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#separación-de-los-datos-1"><i class="fa fa-check"></i><b>4.8.3</b> Separación de los datos</a></li>
<li class="chapter" data-level="4.8.4" data-path="introducción-a-machine-learning.html"><a href="introducción-a-machine-learning.html#definición-de-la-receta-1"><i class="fa fa-check"></i><b>4.8.4</b> Definición de la receta</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="regresión-lineal.html"><a href="regresión-lineal.html"><i class="fa fa-check"></i><b>5</b> Regresión Lineal</a>
<ul>
<li class="chapter" data-level="5.1" data-path="regresión-lineal.html"><a href="regresión-lineal.html#ajuste-de-modelo"><i class="fa fa-check"></i><b>5.1</b> Ajuste de modelo</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="regresión-lineal.html"><a href="regresión-lineal.html#estimación-de-parámetros-regresión-lineal-simple"><i class="fa fa-check"></i><b>5.1.1</b> Estimación de parámetros: Regresión lineal simple</a></li>
<li class="chapter" data-level="5.1.2" data-path="regresión-lineal.html"><a href="regresión-lineal.html#estimación-de-parámetros-regresión-lineal-múltiple"><i class="fa fa-check"></i><b>5.1.2</b> Estimación de parámetros: Regresión lineal múltiple</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="regresión-lineal.html"><a href="regresión-lineal.html#residuos-del-modelo"><i class="fa fa-check"></i><b>5.2</b> Residuos del modelo</a>
<ul>
<li class="chapter" data-level="" data-path="regresión-lineal.html"><a href="regresión-lineal.html#condiciones-para-el-ajuste-de-una-regresión-lineal"><i class="fa fa-check"></i>Condiciones para el ajuste de una regresión lineal:</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="regresión-lineal.html"><a href="regresión-lineal.html#métricas-de-desempeño"><i class="fa fa-check"></i><b>5.3</b> Métricas de desempeño</a></li>
<li class="chapter" data-level="5.4" data-path="regresión-lineal.html"><a href="regresión-lineal.html#implementación-en-r"><i class="fa fa-check"></i><b>5.4</b> Implementación en R</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="regresión-lineal.html"><a href="regresión-lineal.html#coeficientes-del-modelo"><i class="fa fa-check"></i><b>5.4.1</b> Coeficientes del modelo</a></li>
<li class="chapter" data-level="5.4.2" data-path="regresión-lineal.html"><a href="regresión-lineal.html#métricas-de-desempeño-1"><i class="fa fa-check"></i><b>5.4.2</b> Métricas de desempeño</a></li>
<li class="chapter" data-level="5.4.3" data-path="regresión-lineal.html"><a href="regresión-lineal.html#gráfica-de-ajuste"><i class="fa fa-check"></i><b>5.4.3</b> Gráfica de ajuste</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="regresión-lineal.html"><a href="regresión-lineal.html#métodos-se-selección-de-variables"><i class="fa fa-check"></i><b>5.5</b> Métodos se selección de variables</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="regresión-lineal.html"><a href="regresión-lineal.html#forward-selection-selección-hacia-adelante"><i class="fa fa-check"></i><b>5.5.1</b> Forward selection (selección hacia adelante)</a></li>
<li class="chapter" data-level="5.5.2" data-path="regresión-lineal.html"><a href="regresión-lineal.html#backward-selection-selección-hacia-atrás"><i class="fa fa-check"></i><b>5.5.2</b> Backward selection (selección hacia atrás)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regresión-logística.html"><a href="regresión-logística.html"><i class="fa fa-check"></i><b>6</b> Regresión Logística</a>
<ul>
<li class="chapter" data-level="6.1" data-path="regresión-logística.html"><a href="regresión-logística.html#función-sigmoide"><i class="fa fa-check"></i><b>6.1</b> Función sigmoide</a></li>
<li class="chapter" data-level="6.2" data-path="regresión-logística.html"><a href="regresión-logística.html#ajuste-del-modelo"><i class="fa fa-check"></i><b>6.2</b> Ajuste del modelo</a></li>
<li class="chapter" data-level="6.3" data-path="regresión-logística.html"><a href="regresión-logística.html#clasificación-2"><i class="fa fa-check"></i><b>6.3</b> Clasificación</a></li>
<li class="chapter" data-level="6.4" data-path="regresión-logística.html"><a href="regresión-logística.html#métricas-de-desempeño-2"><i class="fa fa-check"></i><b>6.4</b> Métricas de desempeño</a></li>
<li class="chapter" data-level="6.5" data-path="regresión-logística.html"><a href="regresión-logística.html#implementación-en-r-1"><i class="fa fa-check"></i><b>6.5</b> Implementación en R</a></li>
<li class="chapter" data-level="6.6" data-path="regresión-logística.html"><a href="regresión-logística.html#matriz-de-confusión"><i class="fa fa-check"></i><b>6.6</b> Matriz de Confusión</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html"><i class="fa fa-check"></i><b>7</b> K-Nearest-Neighbor</a>
<ul>
<li class="chapter" data-level="7.1" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html#clasificación-3"><i class="fa fa-check"></i><b>7.1</b> Clasificación</a></li>
<li class="chapter" data-level="7.2" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html#regresión-2"><i class="fa fa-check"></i><b>7.2</b> Regresión</a></li>
<li class="chapter" data-level="7.3" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html#ajuste-del-modelo-1"><i class="fa fa-check"></i><b>7.3</b> Ajuste del modelo</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html#selección-de-hiper-parámetro-k"><i class="fa fa-check"></i><b>7.3.1</b> Selección de Hiper-parámetro K</a></li>
<li class="chapter" data-level="7.3.2" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html#métodos-de-cálculo-de-la-distancia-entre-observaciones"><i class="fa fa-check"></i><b>7.3.2</b> Métodos de cálculo de la distancia entre observaciones</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html#implementación-en-r-2"><i class="fa fa-check"></i><b>7.4</b> Implementación en R</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html#regresión-3"><i class="fa fa-check"></i><b>7.4.1</b> Regresión</a></li>
<li class="chapter" data-level="7.4.2" data-path="k-nearest-neighbor.html"><a href="k-nearest-neighbor.html#clasificación-4"><i class="fa fa-check"></i><b>7.4.2</b> Clasificación</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html"><i class="fa fa-check"></i><b>8</b> Árboles de decisión</a>
<ul>
<li class="chapter" data-level="8.1" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#ajuste-del-modelo-2"><i class="fa fa-check"></i><b>8.1</b> Ajuste del modelo</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#attribute-selective-measure-asm"><i class="fa fa-check"></i><b>8.1.1</b> Attribute Selective Measure (ASM)</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#regularización-de-árboles"><i class="fa fa-check"></i><b>8.2</b> Regularización de árboles</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#nivel-de-profundidad-de-árbol"><i class="fa fa-check"></i><b>8.2.1</b> Nivel de profundidad de árbol</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#aprendizaje-conjunto"><i class="fa fa-check"></i><b>8.3</b> Aprendizaje conjunto</a></li>
<li class="chapter" data-level="8.4" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#bagging"><i class="fa fa-check"></i><b>8.4</b> Bagging</a></li>
<li class="chapter" data-level="8.5" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#random-forest"><i class="fa fa-check"></i><b>8.5</b> Random Forest</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#qué-es"><i class="fa fa-check"></i><b>8.5.1</b> ¿Qué es?</a></li>
<li class="chapter" data-level="8.5.2" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#características-de-los-bosques-aleatorios"><i class="fa fa-check"></i><b>8.5.2</b> Características de los bosques aleatorios</a></li>
<li class="chapter" data-level="8.5.3" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#aplicar-árboles-de-decisión-en-un-bosque-aleatorio"><i class="fa fa-check"></i><b>8.5.3</b> Aplicar árboles de decisión en un bosque aleatorio</a></li>
<li class="chapter" data-level="8.5.4" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#ventajas-y-desventjas-de-bosques-aleatorios"><i class="fa fa-check"></i><b>8.5.4</b> Ventajas y desventjas de bosques aleatorios</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#implementación-de-rf-en-r"><i class="fa fa-check"></i><b>8.6</b> Implementación de RF en R</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#regresión-4"><i class="fa fa-check"></i><b>8.6.1</b> Regresión</a></li>
<li class="chapter" data-level="8.6.2" data-path="árboles-de-decisión.html"><a href="árboles-de-decisión.html#clasificación-5"><i class="fa fa-check"></i><b>8.6.2</b> Clasificación</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html"><i class="fa fa-check"></i><b>9</b> Clustering No Jerárquico</a>
<ul>
<li class="chapter" data-level="9.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#cálculo-de-distancia"><i class="fa fa-check"></i><b>9.1</b> Cálculo de distancia</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#distancias-homogéneas"><i class="fa fa-check"></i><b>9.1.1</b> Distancias homogéneas</a></li>
<li class="chapter" data-level="9.1.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#distancias-mixtas"><i class="fa fa-check"></i><b>9.1.2</b> Distancias mixtas</a></li>
<li class="chapter" data-level="9.1.3" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#visualización-de-distancias"><i class="fa fa-check"></i><b>9.1.3</b> Visualización de distancias</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#tendencia-de-factibilidad"><i class="fa fa-check"></i><b>9.2</b> Tendencia de factibilidad</a></li>
<li class="chapter" data-level="9.3" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#k---means"><i class="fa fa-check"></i><b>9.3</b> K - means</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#ajuste-de-modelo-cómo-funciona-el-algortimo"><i class="fa fa-check"></i><b>9.3.1</b> Ajuste de modelo: ¿Cómo funciona el algortimo?</a></li>
<li class="chapter" data-level="9.3.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#calidad-de-ajuste"><i class="fa fa-check"></i><b>9.3.2</b> Calidad de ajuste</a></li>
<li class="chapter" data-level="9.3.3" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#cómo-seleccionamos-k"><i class="fa fa-check"></i><b>9.3.3</b> ¿Cómo seleccionamos K?</a></li>
<li class="chapter" data-level="9.3.4" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#implementación-en-r-3"><i class="fa fa-check"></i><b>9.3.4</b> Implementación en R</a></li>
<li class="chapter" data-level="9.3.5" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#warnings"><i class="fa fa-check"></i><b>9.3.5</b> Warnings</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#partitioning-around-medoids-pam"><i class="fa fa-check"></i><b>9.4</b> Partitioning Around Medoids (PAM)</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#algoritmo-pam"><i class="fa fa-check"></i><b>9.4.1</b> Algoritmo PAM</a></li>
<li class="chapter" data-level="9.4.2" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#implementación-en-r-4"><i class="fa fa-check"></i><b>9.4.2</b> Implementación en R</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="clustering-no-jerárquico.html"><a href="clustering-no-jerárquico.html#comparación-de-algoritmos"><i class="fa fa-check"></i><b>9.5</b> Comparación de algoritmos</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html"><i class="fa fa-check"></i><b>10</b> Clustering Jerárquico</a>
<ul>
<li class="chapter" data-level="10.1" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#agglomerative-divise-clustering"><i class="fa fa-check"></i><b>10.1</b> Agglomerative &amp; Divise Clustering</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#algoritmo"><i class="fa fa-check"></i><b>10.1.1</b> Algoritmo</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#implementación-en-r-5"><i class="fa fa-check"></i><b>10.2</b> Implementación en R</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#preparación-y-estructuración-de-datos"><i class="fa fa-check"></i><b>10.2.1</b> Preparación y estructuración de datos</a></li>
<li class="chapter" data-level="10.2.2" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#medidas-de-disimilaridad"><i class="fa fa-check"></i><b>10.2.2</b> Medidas de (di)similaridad</a></li>
<li class="chapter" data-level="10.2.3" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#función-liga"><i class="fa fa-check"></i><b>10.2.3</b> Función Liga</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#dendogramas"><i class="fa fa-check"></i><b>10.3</b> Dendogramas</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="clustering-jerárquico.html"><a href="clustering-jerárquico.html#selección-de-grupos"><i class="fa fa-check"></i><b>10.3.1</b> Selección de grupos</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="./"><img src="img/amat-logo.png" width="280"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción a Ciencia de Datos y Machine Learning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introducción-a-r" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Capítulo 2</span> Introducción a R<a href="introducción-a-r.html#introducción-a-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>R</em> (R Core Team) es un entorno y lenguaje de programación que permite el análisis estadístico de información y reportes gráficos. Es ampliamente usado en investigación por la comunidad estadística en campos como la biomedicina, minería de datos, matemáticas financieras, entre otros. Ha ganado mucha popularidad en los últimos años al ser un software libre que está en constante crecimiento por las aportaciones de otros usuarios y que permite la interacción con software estadísticos como STATA, SAS, SPSS, etc.. R permite la incorporación de librerías y paqueterías con funcionalidades específicas, por lo que es un lenguaje de programación muy completo y fácil de usar.</p>
<div id="cómo-obtener-r" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> ¿Cómo obtener <em>R</em>?<a href="introducción-a-r.html#cómo-obtener-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R puede ser fácilmente descargado de forma gratuita desde el sitio oficial <a href="http://www.r-project.org/" class="uri">http://www.r-project.org/</a>. R está disponible para las plataformas Windows, Mac y Linux.</p>
</div>
<div id="qué-es-rstudio" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> ¿Qué es RStudio?<a href="introducción-a-r.html#qué-es-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>RStudio</em> es un Entorno de Desarrollo Integrado (IDE, por sus siglas en inglés) para R. Este permite y facilita el desarrollo y ejecución de sintaxis para código en <em>R</em>, incluye una consola y proporciona herramientas para la gestión del espacio de trabajo. <em>RStudio</em> está disponible para Windows, Mac y Linux o para navegadores conectados a <em>RStudio Server o RStudio Server Pro</em>.</p>
<p>Algunas de las principales características de Rstudio que lo hacen una gran herramienta para trabajar en <em>R</em>, son:</p>
<ul>
<li>Auto completado de código</li>
<li>Sangría inteligente</li>
<li>Resaltado de sintaxis</li>
<li>Facilidad para definir funciones</li>
<li>Soporte integrado</li>
<li>Documentación integrada</li>
<li>Administración de directorios y proyectos</li>
<li>Visor de datos</li>
<li>Depurador interactivo para corregir errores</li>
<li>Conección con Rmarkwon y Sweave</li>
</ul>
<p>La siguiente imagen muestra la forma en la que está estructurado RStudio. El orden de los páneles puede ser elegido por el usuario, así como las características de tipo de letra, tamaño y color de fondo, entre otras características.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-31"></span>
<img src="img/02-intro2r/rstudio.png" alt="Páneles de trabajo de Rstudio" width="960" />
<p class="caption">
Figure 2.1: Páneles de trabajo de Rstudio
</p>
</div>
</div>
<div id="lectura-de-datos" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Lectura de datos<a href="introducción-a-r.html#lectura-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El primer paso para analizar datos es incorporarlos a la sesión de R para que puedan ser manipulados y observados. Existen múltiples librerías y funciones en <em>R</em> que permiten leer la información proveniente de un archivo externo, el cual puede tener una de muchas posibles extensiones.</p>
<p>Usualmente, no creamos los datos desde la sesión de <em>R</em>, sino que a través de un archivo externo se realiza la lectura de datos escritos en un archivo. Los más comúnes son:</p>
<p><img src="img/02-intro2r/archivos.jpg" style="display: block; margin: auto;" /></p>
<p>La paquetería <em>readr</em> fue desarrollada recientemente para lidiar con la lectura de archivos grandes rápidamente. Esta paquetería proporciona funciones que suelen ser mucho más rápidas que las funciones base que proporciona <em>R</em>.</p>
<p><strong>Ventajas de readr:</strong></p>
<ul>
<li><p>Por lo general, son mucho más rápidos (~ 10x) que sus funciones equivalentes.</p></li>
<li><p>Producen tibbles:</p>
<ul>
<li>No convierten vectores de caracteres en factores.</li>
<li>No usan nombres de filas ni modifican los nombres de columnas.</li>
</ul></li>
<li><p>Reproducibilidad</p></li>
</ul>
<div id="archivos-csv" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Archivos <em>csv</em><a href="introducción-a-r.html#archivos-csv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A la hora de importar conjuntos de datos en <em>R</em>, uno de los formatos más habituales en los que hallamos información es en archivos separados por comas (comma separated values), cuya extensión suele ser <em>.csv</em>. En ellos encontramos múltiples líneas que recogen la tabla de interés, y en las cuales los valores aparecen, de manera consecutiva, separados por el carácter <em>,</em>.</p>
<p>Para importar este tipo de archivos en nuestra sesión de <em>R</em>, se utiliza la función <code>read_csv()</code>. Para acceder a su documentación utilizamos el comando <code>?read_csv</code>.</p>
<p>El único argumento que debemos de pasar a esta función de manera obligatoria, es <code>file</code>, el nombre o la ruta completa del archivo que pretendemos importar.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="introducción-a-r.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb4-2"><a href="introducción-a-r.html#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="introducción-a-r.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(</span>
<span id="cb4-4"><a href="introducción-a-r.html#cb4-4" aria-hidden="true" tabindex="-1"></a>  file,</span>
<span id="cb4-5"><a href="introducción-a-r.html#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-6"><a href="introducción-a-r.html#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_types =</span> <span class="cn">NULL</span>,</span>
<span id="cb4-7"><a href="introducción-a-r.html#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">locale =</span> <span class="fu">default_locale</span>(),</span>
<span id="cb4-8"><a href="introducción-a-r.html#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;NA&quot;</span>),</span>
<span id="cb4-9"><a href="introducción-a-r.html#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">quoted_na =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-10"><a href="introducción-a-r.html#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">quote =</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>,</span>
<span id="cb4-11"><a href="introducción-a-r.html#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">comment =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p>La paquetería <em>readr</em> fue desarrollada recientemente para lidiar con la lectura de archivos grandes rápidamente. El paquete proporciona reemplazos para funciones como <em>read.table()</em>, <em>read.csv()</em> entre otras. Esta paquetería proporciona funciones que suelen ser mucho más rápidas que las funciones base que proporciona <em>R</em>.</p>
<p><strong>Ventajas de readr:</strong></p>
<ul>
<li><p>Por lo general, son mucho más rápidos (~ 10x) que sus funciones equivalentes.</p></li>
<li><p>Producen tibbles:</p>
<ul>
<li>No convierten vectores de caracteres en factores.</li>
<li>No usan nombres de filas ni modifican los nombres de columnas.</li>
</ul></li>
<li><p>Reproducibilidad</p></li>
<li><p>No convierte, automáticamente, las columnas con cadenas de caracteres a factores, como sí hacen por defecto las otras funciones base de <em>R</em>.</p></li>
<li><p>Reconoce ocho clases diferentes de datos (enteros, lógicos, etc.), dejando el resto como cadenas de caracteres.</p></li>
</ul>
<p>Veamos un ejemplo:</p>
<p>La base de datos llamada <a href="https://drive.google.com/file/d/1pCHFeF8rtQiUcip9zf4Xtk0pAQ-5Om-r/view?usp=sharing">AmesHousing</a> contiene un conjunto de datos con información de la Oficina del Tasador de Ames utilizada para calcular los valores tasados para las propiedades residenciales individuales vendidas en Ames, Iowa, de 2006 a 2010. FUENTES: Ames, Oficina del Tasador de Iowa.</p>
<p>Pueden descargar los datos para la clase <a href="https://drive.google.com/drive/folders/1sNlUWIvKHOTt7qywhPIyl1X00do_Y6Zo?usp=sharing">aquí</a></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="introducción-a-r.html#cb5-1" aria-hidden="true" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ames.csv&quot;</span>) </span>
<span id="cb5-2"><a href="introducción-a-r.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(base, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##                           MS_SubClass                MS_Zoning Lot_Frontage
## 1 One_Story_1946_and_Newer_All_Styles  Residential_Low_Density          141
## 2 One_Story_1946_and_Newer_All_Styles Residential_High_Density           80
##   Lot_Area Street           Alley          Lot_Shape Land_Contour Utilities
## 1    31770   Pave No_Alley_Access Slightly_Irregular          Lvl    AllPub
## 2    11622   Pave No_Alley_Access            Regular          Lvl    AllPub
##   Lot_Config Land_Slope Neighborhood Condition_1 Condition_2 Bldg_Type
## 1     Corner        Gtl   North_Ames        Norm        Norm    OneFam
## 2     Inside        Gtl   North_Ames       Feedr        Norm    OneFam
##   House_Style  Overall_Cond Year_Built Year_Remod_Add Roof_Style Roof_Matl
## 1   One_Story       Average       1960           1960        Hip   CompShg
## 2   One_Story Above_Average       1961           1961      Gable   CompShg
##   Exterior_1st Exterior_2nd Mas_Vnr_Type Mas_Vnr_Area Exter_Cond Foundation
## 1      BrkFace      Plywood        Stone          112    Typical     CBlock
## 2      VinylSd      VinylSd         None            0    Typical     CBlock
##   Bsmt_Cond Bsmt_Exposure BsmtFin_Type_1 BsmtFin_SF_1 BsmtFin_Type_2
## 1      Good            Gd            BLQ            2            Unf
## 2   Typical            No            Rec            6            LwQ
##   BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF Heating Heating_QC Central_Air
## 1            0         441          1080    GasA       Fair           Y
## 2          144         270           882    GasA    Typical           Y
##   Electrical First_Flr_SF Second_Flr_SF Gr_Liv_Area Bsmt_Full_Bath
## 1      SBrkr         1656             0        1656              1
## 2      SBrkr          896             0         896              0
##   Bsmt_Half_Bath Full_Bath Half_Bath Bedroom_AbvGr Kitchen_AbvGr TotRms_AbvGrd
## 1              0         1         0             3             1             7
## 2              0         1         0             2             1             5
##   Functional Fireplaces Garage_Type Garage_Finish Garage_Cars Garage_Area
## 1        Typ          2      Attchd           Fin           2         528
## 2        Typ          0      Attchd           Unf           1         730
##   Garage_Cond      Paved_Drive Wood_Deck_SF Open_Porch_SF Enclosed_Porch
## 1     Typical Partial_Pavement          210            62              0
## 2     Typical            Paved          140             0              0
##   Three_season_porch Screen_Porch Pool_Area Pool_QC           Fence
## 1                  0            0         0 No_Pool        No_Fence
## 2                  0          120         0 No_Pool Minimum_Privacy
##   Misc_Feature Misc_Val Mo_Sold Year_Sold Sale_Type Sale_Condition Sale_Price
## 1         None        0       5      2010       WD          Normal     215000
## 2         None        0       6      2010       WD          Normal     105000
##   Longitude Latitude
## 1 -93.61975 42.05403
## 2 -93.61976 42.05301</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="introducción-a-r.html#cb7-1" aria-hidden="true" tabindex="-1"></a>tidy <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/ames.csv&quot;</span>)</span>
<span id="cb7-2"><a href="introducción-a-r.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tidy, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 74
##   MS_SubClass             MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape
##   &lt;chr&gt;                   &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
## 1 One_Story_1946_and_New… Resident…          141    31770 Pave   No_A… Slightly…
## 2 One_Story_1946_and_New… Resident…           80    11622 Pave   No_A… Regular  
## # ℹ 67 more variables: Land_Contour &lt;chr&gt;, Utilities &lt;chr&gt;, Lot_Config &lt;chr&gt;,
## #   Land_Slope &lt;chr&gt;, Neighborhood &lt;chr&gt;, Condition_1 &lt;chr&gt;, Condition_2 &lt;chr&gt;,
## #   Bldg_Type &lt;chr&gt;, House_Style &lt;chr&gt;, Overall_Cond &lt;chr&gt;, Year_Built &lt;dbl&gt;,
## #   Year_Remod_Add &lt;dbl&gt;, Roof_Style &lt;chr&gt;, Roof_Matl &lt;chr&gt;,
## #   Exterior_1st &lt;chr&gt;, Exterior_2nd &lt;chr&gt;, Mas_Vnr_Type &lt;chr&gt;,
## #   Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;chr&gt;, Foundation &lt;chr&gt;, Bsmt_Cond &lt;chr&gt;,
## #   Bsmt_Exposure &lt;chr&gt;, BsmtFin_Type_1 &lt;chr&gt;, BsmtFin_SF_1 &lt;dbl&gt;, …</code></pre>
<p>¿Y si el archivo que necesitamos leer esta en excel?</p>
</div>
<div id="archivos-txt" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Archivos txt<a href="introducción-a-r.html#archivos-txt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Uno de los archivos más comunes es el <em>.txt</em>. La librería <em>readr</em> también cuenta con funciones que permiten leer fácilmente los datos contenidos en formato tabular.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="introducción-a-r.html#cb9-1" aria-hidden="true" tabindex="-1"></a>ames_txt <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/ames.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;;&quot;</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-2"><a href="introducción-a-r.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ames_txt, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 74
##   MS_SubClass             MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape
##   &lt;chr&gt;                   &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
## 1 One_Story_1946_and_New… Resident…          141    31770 Pave   No_A… Slightly…
## 2 One_Story_1946_and_New… Resident…           80    11622 Pave   No_A… Regular  
## # ℹ 67 more variables: Land_Contour &lt;chr&gt;, Utilities &lt;chr&gt;, Lot_Config &lt;chr&gt;,
## #   Land_Slope &lt;chr&gt;, Neighborhood &lt;chr&gt;, Condition_1 &lt;chr&gt;, Condition_2 &lt;chr&gt;,
## #   Bldg_Type &lt;chr&gt;, House_Style &lt;chr&gt;, Overall_Cond &lt;chr&gt;, Year_Built &lt;dbl&gt;,
## #   Year_Remod_Add &lt;dbl&gt;, Roof_Style &lt;chr&gt;, Roof_Matl &lt;chr&gt;,
## #   Exterior_1st &lt;chr&gt;, Exterior_2nd &lt;chr&gt;, Mas_Vnr_Type &lt;chr&gt;,
## #   Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;chr&gt;, Foundation &lt;chr&gt;, Bsmt_Cond &lt;chr&gt;,
## #   Bsmt_Exposure &lt;chr&gt;, BsmtFin_Type_1 &lt;chr&gt;, BsmtFin_SF_1 &lt;dbl&gt;, …</code></pre>
<p>La función <em>read_delim()</em> funciona para leer archivos con diferentes delimitadores posibles, es decir, es posible especificar si las columnas están separadas por espacios, comas, punto y coma, tabulador o algún otro delimitador (““,”,“,”;“,”, “@”).</p>
<p>Adicionalmente, se puede especificar si el archivo contiene encabezado, si existen renglones a saltar, codificación, tipo de variable y muchas más opciones. Todos estos detalles pueden consultarse en la documentación de ayuda.</p>
</div>
<div id="archivos-xls-y-xlsx" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Archivos <em>xls</em> y <em>xlsx</em><a href="introducción-a-r.html#archivos-xls-y-xlsx" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La paquetería <em>readxl</em> facilita la obtención de datos tabulares de archivos de <em>Excel</em>. Admite tanto el formato <em>.xls</em> heredado como el formato <em>.xlsx</em> moderno basado en <em>XML</em>.</p>
<p>Esta paquetería pone a disposición las siguientes funciones:</p>
<ul>
<li><code>read_xlsx()</code> lee un archivo con extensión <em>xlsx</em>.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="introducción-a-r.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_xlsx</span>(</span>
<span id="cb11-2"><a href="introducción-a-r.html#cb11-2" aria-hidden="true" tabindex="-1"></a> path,</span>
<span id="cb11-3"><a href="introducción-a-r.html#cb11-3" aria-hidden="true" tabindex="-1"></a> <span class="at">sheet =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-4"><a href="introducción-a-r.html#cb11-4" aria-hidden="true" tabindex="-1"></a> <span class="at">range =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-5"><a href="introducción-a-r.html#cb11-5" aria-hidden="true" tabindex="-1"></a> <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb11-6"><a href="introducción-a-r.html#cb11-6" aria-hidden="true" tabindex="-1"></a> <span class="at">col_types =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-7"><a href="introducción-a-r.html#cb11-7" aria-hidden="true" tabindex="-1"></a> <span class="at">na =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb11-8"><a href="introducción-a-r.html#cb11-8" aria-hidden="true" tabindex="-1"></a> <span class="at">trim_ws =</span> <span class="cn">TRUE</span>,</span>
<span id="cb11-9"><a href="introducción-a-r.html#cb11-9" aria-hidden="true" tabindex="-1"></a> <span class="at">skip =</span> <span class="dv">0</span>,</span>
<span id="cb11-10"><a href="introducción-a-r.html#cb11-10" aria-hidden="true" tabindex="-1"></a> <span class="at">n_max =</span> <span class="cn">Inf</span>,</span>
<span id="cb11-11"><a href="introducción-a-r.html#cb11-11" aria-hidden="true" tabindex="-1"></a> <span class="at">guess_max =</span> <span class="fu">min</span>(<span class="dv">1000</span>, n_max),</span>
<span id="cb11-12"><a href="introducción-a-r.html#cb11-12" aria-hidden="true" tabindex="-1"></a> <span class="at">progress =</span> <span class="fu">readxl_progress</span>(),</span>
<span id="cb11-13"><a href="introducción-a-r.html#cb11-13" aria-hidden="true" tabindex="-1"></a> <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span></span>
<span id="cb11-14"><a href="introducción-a-r.html#cb11-14" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<ul>
<li><code>read_xls()</code> lee un archivo con extensión <em>xls</em>.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="introducción-a-r.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_xls</span>(</span>
<span id="cb12-2"><a href="introducción-a-r.html#cb12-2" aria-hidden="true" tabindex="-1"></a> path,</span>
<span id="cb12-3"><a href="introducción-a-r.html#cb12-3" aria-hidden="true" tabindex="-1"></a> <span class="at">sheet =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-4"><a href="introducción-a-r.html#cb12-4" aria-hidden="true" tabindex="-1"></a> <span class="at">range =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-5"><a href="introducción-a-r.html#cb12-5" aria-hidden="true" tabindex="-1"></a> <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-6"><a href="introducción-a-r.html#cb12-6" aria-hidden="true" tabindex="-1"></a> <span class="at">col_types =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-7"><a href="introducción-a-r.html#cb12-7" aria-hidden="true" tabindex="-1"></a> <span class="at">na =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb12-8"><a href="introducción-a-r.html#cb12-8" aria-hidden="true" tabindex="-1"></a> <span class="at">trim_ws =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-9"><a href="introducción-a-r.html#cb12-9" aria-hidden="true" tabindex="-1"></a> <span class="at">skip =</span> <span class="dv">0</span>,</span>
<span id="cb12-10"><a href="introducción-a-r.html#cb12-10" aria-hidden="true" tabindex="-1"></a> <span class="at">n_max =</span> <span class="cn">Inf</span>, </span>
<span id="cb12-11"><a href="introducción-a-r.html#cb12-11" aria-hidden="true" tabindex="-1"></a> <span class="at">guess_max =</span> <span class="fu">min</span>(<span class="dv">1000</span>, n_max),</span>
<span id="cb12-12"><a href="introducción-a-r.html#cb12-12" aria-hidden="true" tabindex="-1"></a> <span class="at">progress =</span> <span class="fu">readxl_progress</span>(),</span>
<span id="cb12-13"><a href="introducción-a-r.html#cb12-13" aria-hidden="true" tabindex="-1"></a> <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span></span>
<span id="cb12-14"><a href="introducción-a-r.html#cb12-14" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<ul>
<li><code>read_excel()</code> determina si el archivo es de tipo <em>xls</em> o <em>xlsx</em> para después llamar a una de las funciones mencionadas anteriormente.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="introducción-a-r.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(</span>
<span id="cb13-2"><a href="introducción-a-r.html#cb13-2" aria-hidden="true" tabindex="-1"></a> path,</span>
<span id="cb13-3"><a href="introducción-a-r.html#cb13-3" aria-hidden="true" tabindex="-1"></a> <span class="at">sheet =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-4"><a href="introducción-a-r.html#cb13-4" aria-hidden="true" tabindex="-1"></a> <span class="at">range =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-5"><a href="introducción-a-r.html#cb13-5" aria-hidden="true" tabindex="-1"></a> <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb13-6"><a href="introducción-a-r.html#cb13-6" aria-hidden="true" tabindex="-1"></a> <span class="at">col_types =</span> <span class="cn">NULL</span>, </span>
<span id="cb13-7"><a href="introducción-a-r.html#cb13-7" aria-hidden="true" tabindex="-1"></a> <span class="at">na =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb13-8"><a href="introducción-a-r.html#cb13-8" aria-hidden="true" tabindex="-1"></a> <span class="at">trim_ws =</span> <span class="cn">TRUE</span>, </span>
<span id="cb13-9"><a href="introducción-a-r.html#cb13-9" aria-hidden="true" tabindex="-1"></a> <span class="at">skip =</span> <span class="dv">0</span>,</span>
<span id="cb13-10"><a href="introducción-a-r.html#cb13-10" aria-hidden="true" tabindex="-1"></a> <span class="at">n_max =</span> <span class="cn">Inf</span>,</span>
<span id="cb13-11"><a href="introducción-a-r.html#cb13-11" aria-hidden="true" tabindex="-1"></a> <span class="at">guess_max =</span> <span class="fu">min</span>(<span class="dv">1000</span>, n_max),</span>
<span id="cb13-12"><a href="introducción-a-r.html#cb13-12" aria-hidden="true" tabindex="-1"></a> <span class="at">progress =</span> <span class="fu">readxl_progress</span>(),</span>
<span id="cb13-13"><a href="introducción-a-r.html#cb13-13" aria-hidden="true" tabindex="-1"></a> <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span></span>
<span id="cb13-14"><a href="introducción-a-r.html#cb13-14" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<p><strong>EJERCICIO:</strong> Leer archivo excel de la carpeta del curso</p>
</div>
<div id="archivos-json" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Archivos json<a href="introducción-a-r.html#archivos-json" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se utiliza la función <code>fromJSON</code> de la paquetería <em>jsonlite</em></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="introducción-a-r.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb14-2"><a href="introducción-a-r.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="introducción-a-r.html#cb14-3" aria-hidden="true" tabindex="-1"></a>base_json <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="st">&quot;data/ames.json&quot;</span>)</span>
<span id="cb14-4"><a href="introducción-a-r.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(base_json, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##                           MS_SubClass                MS_Zoning Lot_Frontage
## 1 One_Story_1946_and_Newer_All_Styles  Residential_Low_Density          141
## 2 One_Story_1946_and_Newer_All_Styles Residential_High_Density           80
##   Lot_Area Street           Alley          Lot_Shape Land_Contour Utilities
## 1    31770   Pave No_Alley_Access Slightly_Irregular          Lvl    AllPub
## 2    11622   Pave No_Alley_Access            Regular          Lvl    AllPub
##   Lot_Config Land_Slope Neighborhood Condition_1 Condition_2 Bldg_Type
## 1     Corner        Gtl   North_Ames        Norm        Norm    OneFam
## 2     Inside        Gtl   North_Ames       Feedr        Norm    OneFam
##   House_Style  Overall_Cond Year_Built Year_Remod_Add Roof_Style Roof_Matl
## 1   One_Story       Average       1960           1960        Hip   CompShg
## 2   One_Story Above_Average       1961           1961      Gable   CompShg
##   Exterior_1st Exterior_2nd Mas_Vnr_Type Mas_Vnr_Area Exter_Cond Foundation
## 1      BrkFace      Plywood        Stone          112    Typical     CBlock
## 2      VinylSd      VinylSd         None            0    Typical     CBlock
##   Bsmt_Cond Bsmt_Exposure BsmtFin_Type_1 BsmtFin_SF_1 BsmtFin_Type_2
## 1      Good            Gd            BLQ            2            Unf
## 2   Typical            No            Rec            6            LwQ
##   BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF Heating Heating_QC Central_Air
## 1            0         441          1080    GasA       Fair           Y
## 2          144         270           882    GasA    Typical           Y
##   Electrical First_Flr_SF Second_Flr_SF Gr_Liv_Area Bsmt_Full_Bath
## 1      SBrkr         1656             0        1656              1
## 2      SBrkr          896             0         896              0
##   Bsmt_Half_Bath Full_Bath Half_Bath Bedroom_AbvGr Kitchen_AbvGr TotRms_AbvGrd
## 1              0         1         0             3             1             7
## 2              0         1         0             2             1             5
##   Functional Fireplaces Garage_Type Garage_Finish Garage_Cars Garage_Area
## 1        Typ          2      Attchd           Fin           2         528
## 2        Typ          0      Attchd           Unf           1         730
##   Garage_Cond      Paved_Drive Wood_Deck_SF Open_Porch_SF Enclosed_Porch
## 1     Typical Partial_Pavement          210            62              0
## 2     Typical            Paved          140             0              0
##   Three_season_porch Screen_Porch Pool_Area Pool_QC           Fence
## 1                  0            0         0 No_Pool        No_Fence
## 2                  0          120         0 No_Pool Minimum_Privacy
##   Misc_Feature Misc_Val Mo_Sold Year_Sold Sale_Type Sale_Condition Sale_Price
## 1         None        0       5      2010       WD          Normal     215000
## 2         None        0       6      2010       WD          Normal     105000
##   Longitude Latitude
## 1  -93.6198   42.054
## 2  -93.6198   42.053</code></pre>
</div>
<div id="archivos-rds" class="section level3 hasAnchor" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> Archivos rds<a href="introducción-a-r.html#archivos-rds" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Un tipo de archivo que resulta de particular interés, es el <em>.RDS</em>. Este archivo comprime cualquier objeto o resultado que sea usado o producido en <em>R</em>. Uno puede almacenar el objeto de interés de la siguiente manera:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="introducción-a-r.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(base_json, <span class="st">&quot;data/ames.rds&quot;</span>)</span></code></pre></div>
<p>Puede observarse que en el explorador de archivos se encuentra ahora el nuevo archivo con extensión <em>.rds</em>, el cual puede ser posteriormente incorporado a una sesión de <em>R</em> para seguir trabajando con él.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="introducción-a-r.html#cb17-1" aria-hidden="true" tabindex="-1"></a>base_rds <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/ames.rds&quot;</span>)</span></code></pre></div>
<p>Algunas de las grandes ventajas que tiene almacenar los archivos en formato rds, son las siguientes:</p>
<ul>
<li><p>No es necesario volver a ejecutar procesos largos cuando ya se ha logrado realizar una vez.</p></li>
<li><p>El tiempo de lectura de la información es considerablemente más rápido.</p></li>
</ul>
</div>
</div>
<div id="consultas-de-datos" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Consultas de datos<a href="introducción-a-r.html#consultas-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ahora que ya se ha estudiado la manera de cargar datos, aprenderemos como manipularlos con <em>dplyr.</em> El paquete <em>dplyr</em> proporciona un conjunto de funciones muy útiles para manipular data-frames y así reducir el número de repeticiones, la probabilidad de cometer errores y el número de caracteres que hay que escribir. Como valor extra, podemos encontrar que la gramática de <em>dplyr</em> es más fácil de entender.</p>
<p>Revisaremos algunas de sus funciones <strong>más usadas</strong> (<em>verbos</em>), así como el uso de <strong>pipes</strong> (%&gt;%) para combinarlas.</p>
<ul>
<li><p>select()</p></li>
<li><p>filter()</p></li>
<li><p>arrange()</p></li>
<li><p>mutate()</p></li>
<li><p>summarise()</p></li>
<li><p>join()</p></li>
<li><p>group_by()</p></li>
</ul>
<p>Primero tenemos que instalar y cargar la paquetería (parte de tidyverse):</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="introducción-a-r.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;dplyr&quot;)</span></span>
<span id="cb18-2"><a href="introducción-a-r.html#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="introducción-a-r.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb18-4"><a href="introducción-a-r.html#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code></pre></div>
<p>Usaremos el dataset <em>AmesHousing</em> que se proporcionó en el capítulo anterior (el alumno puede hacer el ejercicio con datos propios)</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="introducción-a-r.html#cb19-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/ames.csv&quot;</span>)</span>
<span id="cb19-2"><a href="introducción-a-r.html#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="introducción-a-r.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(ames_housing)</span></code></pre></div>
<pre><code>## Rows: 2,930
## Columns: 74
## $ MS_SubClass        &lt;chr&gt; &quot;One_Story_1946_and_Newer_All_Styles&quot;, &quot;One_Story_1…
## $ MS_Zoning          &lt;chr&gt; &quot;Residential_Low_Density&quot;, &quot;Residential_High_Densit…
## $ Lot_Frontage       &lt;dbl&gt; 141, 80, 81, 93, 74, 78, 41, 43, 39, 60, 75, 0, 63,…
## $ Lot_Area           &lt;dbl&gt; 31770, 11622, 14267, 11160, 13830, 9978, 4920, 5005…
## $ Street             &lt;chr&gt; &quot;Pave&quot;, &quot;Pave&quot;, &quot;Pave&quot;, &quot;Pave&quot;, &quot;Pave&quot;, &quot;Pave&quot;, &quot;Pa…
## $ Alley              &lt;chr&gt; &quot;No_Alley_Access&quot;, &quot;No_Alley_Access&quot;, &quot;No_Alley_Acc…
## $ Lot_Shape          &lt;chr&gt; &quot;Slightly_Irregular&quot;, &quot;Regular&quot;, &quot;Slightly_Irregula…
## $ Land_Contour       &lt;chr&gt; &quot;Lvl&quot;, &quot;Lvl&quot;, &quot;Lvl&quot;, &quot;Lvl&quot;, &quot;Lvl&quot;, &quot;Lvl&quot;, &quot;Lvl&quot;, &quot;H…
## $ Utilities          &lt;chr&gt; &quot;AllPub&quot;, &quot;AllPub&quot;, &quot;AllPub&quot;, &quot;AllPub&quot;, &quot;AllPub&quot;, &quot;…
## $ Lot_Config         &lt;chr&gt; &quot;Corner&quot;, &quot;Inside&quot;, &quot;Corner&quot;, &quot;Corner&quot;, &quot;Inside&quot;, &quot;…
## $ Land_Slope         &lt;chr&gt; &quot;Gtl&quot;, &quot;Gtl&quot;, &quot;Gtl&quot;, &quot;Gtl&quot;, &quot;Gtl&quot;, &quot;Gtl&quot;, &quot;Gtl&quot;, &quot;G…
## $ Neighborhood       &lt;chr&gt; &quot;North_Ames&quot;, &quot;North_Ames&quot;, &quot;North_Ames&quot;, &quot;North_Am…
## $ Condition_1        &lt;chr&gt; &quot;Norm&quot;, &quot;Feedr&quot;, &quot;Norm&quot;, &quot;Norm&quot;, &quot;Norm&quot;, &quot;Norm&quot;, &quot;N…
## $ Condition_2        &lt;chr&gt; &quot;Norm&quot;, &quot;Norm&quot;, &quot;Norm&quot;, &quot;Norm&quot;, &quot;Norm&quot;, &quot;Norm&quot;, &quot;No…
## $ Bldg_Type          &lt;chr&gt; &quot;OneFam&quot;, &quot;OneFam&quot;, &quot;OneFam&quot;, &quot;OneFam&quot;, &quot;OneFam&quot;, &quot;…
## $ House_Style        &lt;chr&gt; &quot;One_Story&quot;, &quot;One_Story&quot;, &quot;One_Story&quot;, &quot;One_Story&quot;,…
## $ Overall_Cond       &lt;chr&gt; &quot;Average&quot;, &quot;Above_Average&quot;, &quot;Above_Average&quot;, &quot;Avera…
## $ Year_Built         &lt;dbl&gt; 1960, 1961, 1958, 1968, 1997, 1998, 2001, 1992, 199…
## $ Year_Remod_Add     &lt;dbl&gt; 1960, 1961, 1958, 1968, 1998, 1998, 2001, 1992, 199…
## $ Roof_Style         &lt;chr&gt; &quot;Hip&quot;, &quot;Gable&quot;, &quot;Hip&quot;, &quot;Hip&quot;, &quot;Gable&quot;, &quot;Gable&quot;, &quot;Ga…
## $ Roof_Matl          &lt;chr&gt; &quot;CompShg&quot;, &quot;CompShg&quot;, &quot;CompShg&quot;, &quot;CompShg&quot;, &quot;CompSh…
## $ Exterior_1st       &lt;chr&gt; &quot;BrkFace&quot;, &quot;VinylSd&quot;, &quot;Wd Sdng&quot;, &quot;BrkFace&quot;, &quot;VinylS…
## $ Exterior_2nd       &lt;chr&gt; &quot;Plywood&quot;, &quot;VinylSd&quot;, &quot;Wd Sdng&quot;, &quot;BrkFace&quot;, &quot;VinylS…
## $ Mas_Vnr_Type       &lt;chr&gt; &quot;Stone&quot;, &quot;None&quot;, &quot;BrkFace&quot;, &quot;None&quot;, &quot;None&quot;, &quot;BrkFac…
## $ Mas_Vnr_Area       &lt;dbl&gt; 112, 0, 108, 0, 0, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6…
## $ Exter_Cond         &lt;chr&gt; &quot;Typical&quot;, &quot;Typical&quot;, &quot;Typical&quot;, &quot;Typical&quot;, &quot;Typica…
## $ Foundation         &lt;chr&gt; &quot;CBlock&quot;, &quot;CBlock&quot;, &quot;CBlock&quot;, &quot;CBlock&quot;, &quot;PConc&quot;, &quot;P…
## $ Bsmt_Cond          &lt;chr&gt; &quot;Good&quot;, &quot;Typical&quot;, &quot;Typical&quot;, &quot;Typical&quot;, &quot;Typical&quot;,…
## $ Bsmt_Exposure      &lt;chr&gt; &quot;Gd&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Mn&quot;, &quot;No&quot;, &quot;No…
## $ BsmtFin_Type_1     &lt;chr&gt; &quot;BLQ&quot;, &quot;Rec&quot;, &quot;ALQ&quot;, &quot;ALQ&quot;, &quot;GLQ&quot;, &quot;GLQ&quot;, &quot;GLQ&quot;, &quot;A…
## $ BsmtFin_SF_1       &lt;dbl&gt; 2, 6, 1, 1, 3, 3, 3, 1, 3, 7, 7, 1, 7, 3, 3, 1, 3, …
## $ BsmtFin_Type_2     &lt;chr&gt; &quot;Unf&quot;, &quot;LwQ&quot;, &quot;Unf&quot;, &quot;Unf&quot;, &quot;Unf&quot;, &quot;Unf&quot;, &quot;Unf&quot;, &quot;U…
## $ BsmtFin_SF_2       &lt;dbl&gt; 0, 144, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1120, 0…
## $ Bsmt_Unf_SF        &lt;dbl&gt; 441, 270, 406, 1045, 137, 324, 722, 1017, 415, 994,…
## $ Total_Bsmt_SF      &lt;dbl&gt; 1080, 882, 1329, 2110, 928, 926, 1338, 1280, 1595, …
## $ Heating            &lt;chr&gt; &quot;GasA&quot;, &quot;GasA&quot;, &quot;GasA&quot;, &quot;GasA&quot;, &quot;GasA&quot;, &quot;GasA&quot;, &quot;Ga…
## $ Heating_QC         &lt;chr&gt; &quot;Fair&quot;, &quot;Typical&quot;, &quot;Typical&quot;, &quot;Excellent&quot;, &quot;Good&quot;, …
## $ Central_Air        &lt;chr&gt; &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;…
## $ Electrical         &lt;chr&gt; &quot;SBrkr&quot;, &quot;SBrkr&quot;, &quot;SBrkr&quot;, &quot;SBrkr&quot;, &quot;SBrkr&quot;, &quot;SBrkr…
## $ First_Flr_SF       &lt;dbl&gt; 1656, 896, 1329, 2110, 928, 926, 1338, 1280, 1616, …
## $ Second_Flr_SF      &lt;dbl&gt; 0, 0, 0, 0, 701, 678, 0, 0, 0, 776, 892, 0, 676, 0,…
## $ Gr_Liv_Area        &lt;dbl&gt; 1656, 896, 1329, 2110, 1629, 1604, 1338, 1280, 1616…
## $ Bsmt_Full_Bath     &lt;dbl&gt; 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, …
## $ Bsmt_Half_Bath     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ Full_Bath          &lt;dbl&gt; 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 3, 2, …
## $ Half_Bath          &lt;dbl&gt; 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, …
## $ Bedroom_AbvGr      &lt;dbl&gt; 3, 2, 3, 3, 3, 3, 2, 2, 2, 3, 3, 3, 3, 2, 1, 4, 4, …
## $ Kitchen_AbvGr      &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
## $ TotRms_AbvGrd      &lt;dbl&gt; 7, 5, 6, 8, 6, 7, 6, 5, 5, 7, 7, 6, 7, 5, 4, 12, 8,…
## $ Functional         &lt;chr&gt; &quot;Typ&quot;, &quot;Typ&quot;, &quot;Typ&quot;, &quot;Typ&quot;, &quot;Typ&quot;, &quot;Typ&quot;, &quot;Typ&quot;, &quot;T…
## $ Fireplaces         &lt;dbl&gt; 2, 0, 0, 2, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, …
## $ Garage_Type        &lt;chr&gt; &quot;Attchd&quot;, &quot;Attchd&quot;, &quot;Attchd&quot;, &quot;Attchd&quot;, &quot;Attchd&quot;, &quot;…
## $ Garage_Finish      &lt;chr&gt; &quot;Fin&quot;, &quot;Unf&quot;, &quot;Unf&quot;, &quot;Fin&quot;, &quot;Fin&quot;, &quot;Fin&quot;, &quot;Fin&quot;, &quot;R…
## $ Garage_Cars        &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, …
## $ Garage_Area        &lt;dbl&gt; 528, 730, 312, 522, 482, 470, 582, 506, 608, 442, 4…
## $ Garage_Cond        &lt;chr&gt; &quot;Typical&quot;, &quot;Typical&quot;, &quot;Typical&quot;, &quot;Typical&quot;, &quot;Typica…
## $ Paved_Drive        &lt;chr&gt; &quot;Partial_Pavement&quot;, &quot;Paved&quot;, &quot;Paved&quot;, &quot;Paved&quot;, &quot;Pav…
## $ Wood_Deck_SF       &lt;dbl&gt; 210, 140, 393, 0, 212, 360, 0, 0, 237, 140, 157, 48…
## $ Open_Porch_SF      &lt;dbl&gt; 62, 0, 36, 0, 34, 36, 0, 82, 152, 60, 84, 21, 75, 0…
## $ Enclosed_Porch     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 170, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ Three_season_porch &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ Screen_Porch       &lt;dbl&gt; 0, 120, 0, 0, 0, 0, 0, 144, 0, 0, 0, 0, 0, 0, 140, …
## $ Pool_Area          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ Pool_QC            &lt;chr&gt; &quot;No_Pool&quot;, &quot;No_Pool&quot;, &quot;No_Pool&quot;, &quot;No_Pool&quot;, &quot;No_Poo…
## $ Fence              &lt;chr&gt; &quot;No_Fence&quot;, &quot;Minimum_Privacy&quot;, &quot;No_Fence&quot;, &quot;No_Fenc…
## $ Misc_Feature       &lt;chr&gt; &quot;None&quot;, &quot;None&quot;, &quot;Gar2&quot;, &quot;None&quot;, &quot;None&quot;, &quot;None&quot;, &quot;No…
## $ Misc_Val           &lt;dbl&gt; 0, 0, 12500, 0, 0, 0, 0, 0, 0, 0, 0, 500, 0, 0, 0, …
## $ Mo_Sold            &lt;dbl&gt; 5, 6, 6, 4, 3, 6, 4, 1, 3, 6, 4, 3, 5, 2, 6, 6, 6, …
## $ Year_Sold          &lt;dbl&gt; 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 201…
## $ Sale_Type          &lt;chr&gt; &quot;WD&quot;, &quot;WD&quot;, &quot;WD&quot;, &quot;WD&quot;, &quot;WD&quot;, &quot;WD&quot;, &quot;WD&quot;, &quot;WD&quot;, &quot;WD…
## $ Sale_Condition     &lt;chr&gt; &quot;Normal&quot;, &quot;Normal&quot;, &quot;Normal&quot;, &quot;Normal&quot;, &quot;Normal&quot;, &quot;…
## $ Sale_Price         &lt;dbl&gt; 215000, 105000, 172000, 244000, 189900, 195500, 213…
## $ Longitude          &lt;dbl&gt; -93.61975, -93.61976, -93.61939, -93.61732, -93.638…
## $ Latitude           &lt;dbl&gt; 42.05403, 42.05301, 42.05266, 42.05125, 42.06090, 4…</code></pre>
<div id="seleccionar-columnas" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Seleccionar columnas<a href="introducción-a-r.html#seleccionar-columnas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Observamos que nuestros datos tienen 2,930 observaciones y 74 variables, con <em>select()</em> podemos seleccionar las variables que se indiquen.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="introducción-a-r.html#cb21-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> <span class="fu">select</span>(Lot_Area, Neighborhood, Year_Sold, Sale_Price)</span></code></pre></div>
<pre><code>## # A tibble: 2,930 × 4
##    Lot_Area Neighborhood Year_Sold Sale_Price
##       &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;
##  1    31770 North_Ames        2010     215000
##  2    11622 North_Ames        2010     105000
##  3    14267 North_Ames        2010     172000
##  4    11160 North_Ames        2010     244000
##  5    13830 Gilbert           2010     189900
##  6     9978 Gilbert           2010     195500
##  7     4920 Stone_Brook       2010     213500
##  8     5005 Stone_Brook       2010     191500
##  9     5389 Stone_Brook       2010     236500
## 10     7500 Gilbert           2010     189000
## # ℹ 2,920 more rows</code></pre>
<div class="infobox tip">
<p><strong>¡¡ RECORDAR !!</strong></p>
<p>El operador pipe (%&gt;%) se usa para conectar un elemento con una función o acción a realizar. En este caso solo se indica que en los datos de ames se seleccionan 4 variables.</p>
</div>
<p>Con <em>select()</em> y <em>contains()</em> podemos seleccionar variables con alguna cadena de texto.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="introducción-a-r.html#cb23-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;Area&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2,930 × 5
##    Lot_Area Mas_Vnr_Area Gr_Liv_Area Garage_Area Pool_Area
##       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;
##  1    31770          112        1656         528         0
##  2    11622            0         896         730         0
##  3    14267          108        1329         312         0
##  4    11160            0        2110         522         0
##  5    13830            0        1629         482         0
##  6     9978           20        1604         470         0
##  7     4920            0        1338         582         0
##  8     5005            0        1280         506         0
##  9     5389            0        1616         608         0
## 10     7500            0        1804         442         0
## # ℹ 2,920 more rows</code></pre>
<p>De igual manera, con <em>select()</em>, <em>ends_with</em> y <em>start_with()</em> podemos seleccionar que inicien o terminen con alguna cadena de texto.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="introducción-a-r.html#cb25-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;Garage&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2,930 × 5
##    Garage_Type Garage_Finish Garage_Cars Garage_Area Garage_Cond
##    &lt;chr&gt;       &lt;chr&gt;               &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;      
##  1 Attchd      Fin                     2         528 Typical    
##  2 Attchd      Unf                     1         730 Typical    
##  3 Attchd      Unf                     1         312 Typical    
##  4 Attchd      Fin                     2         522 Typical    
##  5 Attchd      Fin                     2         482 Typical    
##  6 Attchd      Fin                     2         470 Typical    
##  7 Attchd      Fin                     2         582 Typical    
##  8 Attchd      RFn                     2         506 Typical    
##  9 Attchd      RFn                     2         608 Typical    
## 10 Attchd      Fin                     2         442 Typical    
## # ℹ 2,920 more rows</code></pre>
<p>Funciones útiles para <em>select()</em>:</p>
<ul>
<li><p><em>contains()</em>: Selecciona variables cuyo nombre contiene la cadena de texto.</p></li>
<li><p><em>ends_with()</em>: Selecciona variables cuyo nombre termina con la cadena de caracteres.</p></li>
<li><p><em>everything()</em>: Selecciona todas las columnas.</p></li>
<li><p><em>matches()</em>: Selecciona las variables cuyos nombres coinciden con una expresión regular.</p></li>
<li><p><em>num_range()</em>: Selecciona las variables por posición.</p></li>
<li><p><em>start_with()</em>: Selecciona variables cuyos nombres empiezan con la cadena de caracteres.</p></li>
<li><p><em>any_of</em>: Selecciona cualquiera de estas variables, en caso de existir</p></li>
</ul>
<p><strong>EJERCICIO:</strong></p>
<ul>
<li>Crear con datos propios una consulta de columnas usando como variable auxiliar cada una de las listadas anteriormente. Será suficiente con realizar un ejemplo de cada una.</li>
</ul>
</div>
<div id="filtrar-observaciones" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Filtrar observaciones<a href="introducción-a-r.html#filtrar-observaciones" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La función <em>filter()</em> nos permite filtrar filas según una condición, primero notemos que la variable <em>Sale_Condition</em> tiene distintas categorías.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="introducción-a-r.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ames_housing<span class="sc">$</span>Sale_Condition)</span></code></pre></div>
<pre><code>## 
## Abnorml AdjLand  Alloca  Family  Normal Partial 
##     190      12      24      46    2413     245</code></pre>
<div class="infobox important">
<p><strong>¡¡ SPOILER !!</strong></p>
<p>En un modelo predictivo de Machine Learning, <strong>no es correcto</strong> agregar columnas cuyo valor es conocido hasta el momento de la observación. Es decir, no deben agregarse variables que no se conozca su valor al momento de la predicción, como es el caso de <em>condición de venta</em>.</p>
</div>
<p>Ahora usaremos la función <em>filter</em> para quedarnos solo con las observaciones con condición de venta “normal”.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="introducción-a-r.html#cb29-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sale_Condition <span class="sc">==</span> <span class="st">&quot;Normal&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2,413 × 74
##    MS_SubClass            MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape
##    &lt;chr&gt;                  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 One_Story_1946_and_Ne… Resident…          141    31770 Pave   No_A… Slightly…
##  2 One_Story_1946_and_Ne… Resident…           80    11622 Pave   No_A… Regular  
##  3 One_Story_1946_and_Ne… Resident…           81    14267 Pave   No_A… Slightly…
##  4 One_Story_1946_and_Ne… Resident…           93    11160 Pave   No_A… Regular  
##  5 Two_Story_1946_and_Ne… Resident…           74    13830 Pave   No_A… Slightly…
##  6 Two_Story_1946_and_Ne… Resident…           78     9978 Pave   No_A… Slightly…
##  7 One_Story_PUD_1946_an… Resident…           41     4920 Pave   No_A… Regular  
##  8 One_Story_PUD_1946_an… Resident…           43     5005 Pave   No_A… Slightly…
##  9 One_Story_PUD_1946_an… Resident…           39     5389 Pave   No_A… Slightly…
## 10 Two_Story_1946_and_Ne… Resident…           60     7500 Pave   No_A… Regular  
## # ℹ 2,403 more rows
## # ℹ 67 more variables: Land_Contour &lt;chr&gt;, Utilities &lt;chr&gt;, Lot_Config &lt;chr&gt;,
## #   Land_Slope &lt;chr&gt;, Neighborhood &lt;chr&gt;, Condition_1 &lt;chr&gt;, Condition_2 &lt;chr&gt;,
## #   Bldg_Type &lt;chr&gt;, House_Style &lt;chr&gt;, Overall_Cond &lt;chr&gt;, Year_Built &lt;dbl&gt;,
## #   Year_Remod_Add &lt;dbl&gt;, Roof_Style &lt;chr&gt;, Roof_Matl &lt;chr&gt;,
## #   Exterior_1st &lt;chr&gt;, Exterior_2nd &lt;chr&gt;, Mas_Vnr_Type &lt;chr&gt;,
## #   Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;chr&gt;, Foundation &lt;chr&gt;, Bsmt_Cond &lt;chr&gt;, …</code></pre>
<p>También se puede usar para filtrar variables numéricas:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="introducción-a-r.html#cb31-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Lot_Area <span class="sc">&gt;</span> <span class="dv">1000</span> <span class="sc">&amp;</span> Sale_Price <span class="sc">&gt;=</span> <span class="dv">150000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,677 × 74
##    MS_SubClass            MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape
##    &lt;chr&gt;                  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 One_Story_1946_and_Ne… Resident…          141    31770 Pave   No_A… Slightly…
##  2 One_Story_1946_and_Ne… Resident…           81    14267 Pave   No_A… Slightly…
##  3 One_Story_1946_and_Ne… Resident…           93    11160 Pave   No_A… Regular  
##  4 Two_Story_1946_and_Ne… Resident…           74    13830 Pave   No_A… Slightly…
##  5 Two_Story_1946_and_Ne… Resident…           78     9978 Pave   No_A… Slightly…
##  6 One_Story_PUD_1946_an… Resident…           41     4920 Pave   No_A… Regular  
##  7 One_Story_PUD_1946_an… Resident…           43     5005 Pave   No_A… Slightly…
##  8 One_Story_PUD_1946_an… Resident…           39     5389 Pave   No_A… Slightly…
##  9 Two_Story_1946_and_Ne… Resident…           60     7500 Pave   No_A… Regular  
## 10 Two_Story_1946_and_Ne… Resident…           75    10000 Pave   No_A… Slightly…
## # ℹ 1,667 more rows
## # ℹ 67 more variables: Land_Contour &lt;chr&gt;, Utilities &lt;chr&gt;, Lot_Config &lt;chr&gt;,
## #   Land_Slope &lt;chr&gt;, Neighborhood &lt;chr&gt;, Condition_1 &lt;chr&gt;, Condition_2 &lt;chr&gt;,
## #   Bldg_Type &lt;chr&gt;, House_Style &lt;chr&gt;, Overall_Cond &lt;chr&gt;, Year_Built &lt;dbl&gt;,
## #   Year_Remod_Add &lt;dbl&gt;, Roof_Style &lt;chr&gt;, Roof_Matl &lt;chr&gt;,
## #   Exterior_1st &lt;chr&gt;, Exterior_2nd &lt;chr&gt;, Mas_Vnr_Type &lt;chr&gt;,
## #   Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;chr&gt;, Foundation &lt;chr&gt;, Bsmt_Cond &lt;chr&gt;, …</code></pre>
<p>Notemos que en el ejemplo anterior se usa <em>&amp;</em>, que ayuda a filtrar por dos condiciones.</p>
<p>También puede usarse <em>|</em> para filtrar por alguna de las dos condiciones.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="introducción-a-r.html#cb33-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Lot_Area <span class="sc">&lt;</span> <span class="dv">1000</span> <span class="sc">|</span> Sale_Price <span class="sc">&lt;=</span> <span class="dv">150000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,271 × 74
##    MS_SubClass            MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape
##    &lt;chr&gt;                  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 One_Story_1946_and_Ne… Resident…           80    11622 Pave   No_A… Regular  
##  2 One_Story_1946_and_Ne… Resident…          140    19138 Pave   No_A… Regular  
##  3 One_Story_1946_and_Ne… Resident…            0    11241 Pave   No_A… Slightly…
##  4 One_Story_1946_and_Ne… Resident…            0    12537 Pave   No_A… Slightly…
##  5 One_Story_1946_and_Ne… Resident…           65     8450 Pave   No_A… Regular  
##  6 One_Story_1946_and_Ne… Resident…           70     8400 Pave   No_A… Regular  
##  7 One_Story_1946_and_Ne… Resident…           70    10500 Pave   No_A… Regular  
##  8 Two_Story_PUD_1946_an… Resident…           21     1680 Pave   No_A… Regular  
##  9 Two_Story_PUD_1946_an… Resident…           21     1680 Pave   No_A… Regular  
## 10 Two_Story_PUD_1946_an… Resident…           21     1680 Pave   No_A… Regular  
## # ℹ 1,261 more rows
## # ℹ 67 more variables: Land_Contour &lt;chr&gt;, Utilities &lt;chr&gt;, Lot_Config &lt;chr&gt;,
## #   Land_Slope &lt;chr&gt;, Neighborhood &lt;chr&gt;, Condition_1 &lt;chr&gt;, Condition_2 &lt;chr&gt;,
## #   Bldg_Type &lt;chr&gt;, House_Style &lt;chr&gt;, Overall_Cond &lt;chr&gt;, Year_Built &lt;dbl&gt;,
## #   Year_Remod_Add &lt;dbl&gt;, Roof_Style &lt;chr&gt;, Roof_Matl &lt;chr&gt;,
## #   Exterior_1st &lt;chr&gt;, Exterior_2nd &lt;chr&gt;, Mas_Vnr_Type &lt;chr&gt;,
## #   Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;chr&gt;, Foundation &lt;chr&gt;, Bsmt_Cond &lt;chr&gt;, …</code></pre>
<p>Las condiciones pueden ser expresiones lógicas construidas mediante los operadores relacionales y lógicos:</p>
<ul>
<li><p><strong>&lt;</strong> : Menor que</p></li>
<li><p><strong>&gt;</strong> : Mayor que</p></li>
<li><p><strong>==</strong> : Igual que</p></li>
<li><p><strong>&lt;=</strong> : Menor o igual que</p></li>
<li><p><strong>&gt;=</strong> : Mayor o igual que</p></li>
<li><p><strong>!=</strong> : Diferente que</p></li>
<li><p><strong>%in%</strong> : Pertenece al conjunto</p></li>
<li><p><strong>is.na</strong> : Es NA</p></li>
<li><p><strong>!is.na</strong> : No es NA</p></li>
</ul>
<p><strong>EJERCICIO:</strong></p>
<ul>
<li><p>Practicar la función de filtro de observaciones usando los operadores auxiliares.</p></li>
<li><p>Concatenar el resultado de seleccionar columnas y posteriormente filtrar columnas.</p></li>
</ul>
</div>
<div id="ordenar-registros" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Ordenar registros<a href="introducción-a-r.html#ordenar-registros" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La función <em>arrange()</em> se utiliza para ordenar las filas de un data frame de acuerdo a una o varias variables. Este ordenamiento puede ser ascendente o descendente.</p>
<p>Por defecto <em>arrange()</em> ordena las filas por orden ascendente:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="introducción-a-r.html#cb35-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Sale_Price)</span></code></pre></div>
<pre><code>## # A tibble: 2,930 × 74
##    MS_SubClass            MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape
##    &lt;chr&gt;                  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 One_Story_1945_and_Ol… Resident…           68     9656 Pave   No_A… Regular  
##  2 One_Story_1946_and_Ne… A_agr               80    14584 Pave   No_A… Regular  
##  3 One_Story_1945_and_Ol… C_all               60     7879 Pave   No_A… Regular  
##  4 One_Story_1945_and_Ol… Resident…           60     8088 Pave   Grav… Regular  
##  5 One_Story_1946_and_Ne… C_all               50     9000 Pave   No_A… Regular  
##  6 One_and_Half_Story_Fi… Resident…           50     5925 Pave   No_A… Regular  
##  7 One_Story_1946_and_Ne… Resident…           50     5000 Pave   No_A… Regular  
##  8 Two_Story_1945_and_Ol… C_all               50     8500 Pave   Paved Regular  
##  9 One_Story_1945_and_Ol… C_all               72     9392 Pave   No_A… Regular  
## 10 One_Story_1945_and_Ol… Resident…           50     5925 Pave   No_A… Regular  
## # ℹ 2,920 more rows
## # ℹ 67 more variables: Land_Contour &lt;chr&gt;, Utilities &lt;chr&gt;, Lot_Config &lt;chr&gt;,
## #   Land_Slope &lt;chr&gt;, Neighborhood &lt;chr&gt;, Condition_1 &lt;chr&gt;, Condition_2 &lt;chr&gt;,
## #   Bldg_Type &lt;chr&gt;, House_Style &lt;chr&gt;, Overall_Cond &lt;chr&gt;, Year_Built &lt;dbl&gt;,
## #   Year_Remod_Add &lt;dbl&gt;, Roof_Style &lt;chr&gt;, Roof_Matl &lt;chr&gt;,
## #   Exterior_1st &lt;chr&gt;, Exterior_2nd &lt;chr&gt;, Mas_Vnr_Type &lt;chr&gt;,
## #   Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;chr&gt;, Foundation &lt;chr&gt;, Bsmt_Cond &lt;chr&gt;, …</code></pre>
<p><br> <br></p>
<p>Si las queremos ordenar de forma ascendente, lo haremos del siguiente modo:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="introducción-a-r.html#cb37-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Sale_Price))</span></code></pre></div>
<pre><code>## # A tibble: 2,930 × 74
##    MS_SubClass            MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape
##    &lt;chr&gt;                  &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    
##  1 Two_Story_1946_and_Ne… Resident…          104    21535 Pave   No_A… Slightly…
##  2 Two_Story_1946_and_Ne… Resident…          160    15623 Pave   No_A… Slightly…
##  3 Two_Story_1946_and_Ne… Resident…          118    35760 Pave   No_A… Slightly…
##  4 One_Story_1946_and_Ne… Resident…          106    12720 Pave   No_A… Regular  
##  5 One_Story_1946_and_Ne… Resident…          100    12919 Pave   No_A… Slightly…
##  6 One_Story_1946_and_Ne… Resident…          105    13693 Pave   No_A… Regular  
##  7 One_Story_1946_and_Ne… Resident…           52    51974 Pave   No_A… Slightly…
##  8 Two_Story_1946_and_Ne… Resident…          114    17242 Pave   No_A… Slightly…
##  9 Two_Story_1946_and_Ne… Resident…          107    13891 Pave   No_A… Regular  
## 10 Two_Story_1946_and_Ne… Resident…           85    16056 Pave   No_A… Slightly…
## # ℹ 2,920 more rows
## # ℹ 67 more variables: Land_Contour &lt;chr&gt;, Utilities &lt;chr&gt;, Lot_Config &lt;chr&gt;,
## #   Land_Slope &lt;chr&gt;, Neighborhood &lt;chr&gt;, Condition_1 &lt;chr&gt;, Condition_2 &lt;chr&gt;,
## #   Bldg_Type &lt;chr&gt;, House_Style &lt;chr&gt;, Overall_Cond &lt;chr&gt;, Year_Built &lt;dbl&gt;,
## #   Year_Remod_Add &lt;dbl&gt;, Roof_Style &lt;chr&gt;, Roof_Matl &lt;chr&gt;,
## #   Exterior_1st &lt;chr&gt;, Exterior_2nd &lt;chr&gt;, Mas_Vnr_Type &lt;chr&gt;,
## #   Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;chr&gt;, Foundation &lt;chr&gt;, Bsmt_Cond &lt;chr&gt;, …</code></pre>
<p>Si se desea usar dos o más columnas para realizar el ordenamiento, deben separarse por comas cada una de las características</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="introducción-a-r.html#cb39-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="introducción-a-r.html#cb39-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(Sale_Condition, <span class="fu">desc</span>(Sale_Price), Lot_Area) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="introducción-a-r.html#cb39-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Sale_Condition, Sale_Price, Lot_Area)</span></code></pre></div>
<pre><code>## # A tibble: 2,930 × 3
##    Sale_Condition Sale_Price Lot_Area
##    &lt;chr&gt;               &lt;dbl&gt;    &lt;dbl&gt;
##  1 Abnorml            745000    15623
##  2 Abnorml            552000    14836
##  3 Abnorml            475000    11778
##  4 Abnorml            390000    13418
##  5 Abnorml            328900     5119
##  6 Abnorml            310000    14541
##  7 Abnorml            290000     9950
##  8 Abnorml            287000    15498
##  9 Abnorml            258000    12090
## 10 Abnorml            257000    10994
## # ℹ 2,920 more rows</code></pre>
<p>Notemos que en el ejemplo anterior usamos dos <em>pipes</em> (%&gt;%), como habíamos mencionado se pueden usar los necesarios para combinar funciones.</p>
</div>
<div id="agregar-modificar" class="section level3 hasAnchor" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Agregar / Modificar<a href="introducción-a-r.html#agregar-modificar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Con la función <em>mutate()</em> podemos computar transformaciones de variables en un data frame. A menudo, tendremos la necesidad de crear nuevas variables que se calculan a partir de variables existentes. La función <em>mutate()</em> proporciona una interfaz clara para realizar este tipo de operaciones.</p>
<p>Por ejemplo, haremos el cálculo de la antigüedad del inmueble a partir de las variables <em>Year_Sold</em> y <em>Year_Remod_Add</em>:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="introducción-a-r.html#cb41-1" aria-hidden="true" tabindex="-1"></a>ejemplo_mutate <span class="ot">&lt;-</span> ames_housing <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="introducción-a-r.html#cb41-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Year_Sold, Year_Remod_Add) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="introducción-a-r.html#cb41-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">Antique =</span> Year_Sold <span class="sc">-</span> Year_Remod_Add)</span>
<span id="cb41-4"><a href="introducción-a-r.html#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="introducción-a-r.html#cb41-5" aria-hidden="true" tabindex="-1"></a>ejemplo_mutate</span></code></pre></div>
<pre><code>## # A tibble: 2,930 × 3
##    Year_Sold Year_Remod_Add Antique
##        &lt;dbl&gt;          &lt;dbl&gt;   &lt;dbl&gt;
##  1      2010           1960      50
##  2      2010           1961      49
##  3      2010           1958      52
##  4      2010           1968      42
##  5      2010           1998      12
##  6      2010           1998      12
##  7      2010           2001       9
##  8      2010           1992      18
##  9      2010           1996      14
## 10      2010           1999      11
## # ℹ 2,920 more rows</code></pre>
<p>El ejemplo anterior crea una nueva variable. Ahora se presenta otro ejemplo en donde se modifica una variable ya creada.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="introducción-a-r.html#cb43-1" aria-hidden="true" tabindex="-1"></a>ejemplo_mutate <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="introducción-a-r.html#cb43-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">Antique =</span> Antique <span class="sc">*</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2,930 × 3
##    Year_Sold Year_Remod_Add Antique
##        &lt;dbl&gt;          &lt;dbl&gt;   &lt;dbl&gt;
##  1      2010           1960     600
##  2      2010           1961     588
##  3      2010           1958     624
##  4      2010           1968     504
##  5      2010           1998     144
##  6      2010           1998     144
##  7      2010           2001     108
##  8      2010           1992     216
##  9      2010           1996     168
## 10      2010           1999     132
## # ℹ 2,920 more rows</code></pre>
<p>En este segundo ejemplo, se modifica el número de años de antigüedad y se multiplica por un factor de 12 para modificar el tiempo en una escala de meses.</p>
</div>
<div id="resumen-estadístico" class="section level3 hasAnchor" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> Resumen estadístico<a href="introducción-a-r.html#resumen-estadístico" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La función <em>summarise()</em> se comporta de forma análoga a la función <em>mutate()</em>, excepto que en lugar de añadir nuevas columnas crea un nuevo data frame.</p>
<p>Podemos usar el ejemplo anterior y calcular la media de la variable creada <em>Antique</em>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="introducción-a-r.html#cb45-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="introducción-a-r.html#cb45-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Year_Sold, Year_Remod_Add) <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="introducción-a-r.html#cb45-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">Antique =</span> Year_Sold <span class="sc">-</span> Year_Remod_Add) <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="introducción-a-r.html#cb45-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarise</span>(<span class="at">Mean_Antique =</span> <span class="fu">mean</span>(Antique))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   Mean_Antique
##          &lt;dbl&gt;
## 1         23.5</code></pre>
<p>Solo fue necesario agregar un <em>pipe</em>, especificar el nombre de la variable creada y la operación a realizar.</p>
<p>A continuación se muestran funciones que trabajando conjuntamente con la función summarise() facilitarán nuestro trabajo diario. Las primeras pertenecen al paquete base y las otras son del paquete dplyr. Todas ellas toman como argumento un vector y devuelven un único resultado:</p>
<ul>
<li><p><em>min(), max()</em> : Valores max y min.</p></li>
<li><p><em>mean()</em> : Media.</p></li>
<li><p><em>median()</em> : Mediana.</p></li>
<li><p><em>sum()</em> : Suma de los valores.</p></li>
<li><p><em>var(), sd()</em> : Varianza y desviación estándar.</p></li>
<li><p><em>first()</em> : Primer valor en un vector.</p></li>
<li><p><em>last()</em> : El último valor en un vector</p></li>
<li><p><em>n()</em> : El número de valores en un vector.</p></li>
<li><p><em>n_distinct()</em> : El número de valores distintos en un vector.</p></li>
<li><p><em>nth()</em> : Extrae el valor que ocupa la posición n en un vector.</p></li>
</ul>
<p>Mas adelante veremos como combinar esta función con la función <em>group_by()</em> para calcular estadísticos agrupados por alguna característica de interés.</p>
<p><strong>EJERCICIO:</strong></p>
<ul>
<li>Realizar una consulta usando <em>summarise()</em> y cada una de las funciones estadísticas listadas anteriormente.</li>
</ul>
</div>
<div id="agrupamiento" class="section level3 hasAnchor" number="2.4.6">
<h3><span class="header-section-number">2.4.6</span> Agrupamiento<a href="introducción-a-r.html#agrupamiento" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La función <em>group_by()</em> agrupa un conjunto de filas de acuerdo con los valores de una o más columnas o expresiones.</p>
<p>Usaremos el ejemplo anterior. Primero creamos nuestra nueva variable <em>Antique</em>, después agrupamos por vecindario y al final calculamos la media de la variable <em>Antique</em>. Gracias al agrupamiento, nos regresara una media por cada grupo creado, es decir, nos regresara el promedio de la antigüedad por vecindario.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="introducción-a-r.html#cb47-1" aria-hidden="true" tabindex="-1"></a>ames_housing <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="introducción-a-r.html#cb47-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">Antique =</span> Year_Sold <span class="sc">-</span> Year_Remod_Add) <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="introducción-a-r.html#cb47-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(Neighborhood) <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href="introducción-a-r.html#cb47-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarise</span>(<span class="at">Mean_Antique =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Antique), <span class="dv">0</span>))</span></code></pre></div>
<pre><code>## # A tibble: 28 × 2
##    Neighborhood        Mean_Antique
##    &lt;chr&gt;                      &lt;dbl&gt;
##  1 Bloomington_Heights            2
##  2 Blueste                       25
##  3 Briardale                     35
##  4 Brookside                     39
##  5 Clear_Creek                   28
##  6 College_Creek                  8
##  7 Crawford                      29
##  8 Edwards                       33
##  9 Gilbert                        9
## 10 Green_Hills                   14
## # ℹ 18 more rows</code></pre>
<div class="infobox tip">
<p><strong>¡¡ RECORDAR !!</strong></p>
<p>En este <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">link</a> se encuentra un buen resumen de las funciones básicas de <em>dplyr</em></p>
</div>
</div>
</div>
<div id="orden-y-estructura" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Orden y estructura<a href="introducción-a-r.html#orden-y-estructura" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Un conjunto de datos puede ser representado de muchas maneras distintas y contener en todos los casos la misma información. Sin embargo, no todos los modos en que se presenta la información resulta óptimo para su procesamiento y análisis. Los conjuntos de datos ordenados serán más fáciles de trabajar y analizar.</p>
<p>Algunas de las características principales que presentan los conjuntos de datos ordenados son las siguientes:</p>
<ol style="list-style-type: decimal">
<li><p>Cada variable debe tener su propia columna.</p></li>
<li><p>Cada observación debe tener su propio renglón.</p></li>
<li><p>Cada valor debe tener su propia celda.</p></li>
</ol>
<p><img src="img/04-tidyverse/tidy-1.png" width="700pt" style="display: block; margin: auto;" /></p>
<p>La figura anterior muestra la estructura de orden que debe tener un conjunto de datos. A pesar de que pueda parecer intuitivo y sencillo, en la práctica es considerable el número de conjuntos de datos desordenados. La limpieza y ordenamiento debe ser trabajado de forma impecable a fin de que puedan realizarse buenas prácticas. El tiempo de limpieza y ordenamiento varía mucho dependiendo de la dimensión del conjunto de datos.</p>
<p>Algunos de los principales problemas que pueden tener los conjuntos de datos no ordenados son:</p>
<ul>
<li>Una variable puede estar dispersa en múltiples columnas</li>
<li>Una observación puede estar esparcida en múltiples renglones</li>
</ul>
<p>La paquetería <em>tidyr</em> cuenta con funciones para resolver dichos problemas. Entre las principales funciones que tiene la paquetería, se encuentran <em>pivot_longer()</em>, <em>pivot_wider()</em>, <em>separate()</em> y <em>unite()</em>, mismas que se analizarán a continuación.</p>
<div id="pivote-horizontal" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Pivote horizontal<a href="introducción-a-r.html#pivote-horizontal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La función <em>pivot_wider()</em> resulta muy útil a la hora de organizar los datos. Su función consiste en <strong>dispersar una variable clave en múltiples columnas</strong>.</p>
<p>Lo primero que se debe hacer para poder hacer uso de dicha función es instalar y cargar la librería.</p>
<p>El siguiente conjunto de datos contiene el número de localidades rurales y urbanas por municipio de la Ciudad de México. Como es posible observar, algunos municipios aparecen más de una vez en el marco de datos, esto se debe a que cada municipio puede tener ambos ámbitos, rural y urbano. Para hacer que el conjunto de datos sea ordenado, es necesario que cada observación aparezca una sola vez por renglón y cada una de las categorías (rural y urbano) de la variable “Ámbito” deberá ocupar el lugar de una columna.</p>
<p>El siguiente código muestra cómo convertir los datos no ordenados en un conjunto ordenado.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="introducción-a-r.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb49-2"><a href="introducción-a-r.html#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="introducción-a-r.html#cb49-3" aria-hidden="true" tabindex="-1"></a>Resumen <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/loc_mun_cdmx.rds&quot;</span>)</span>
<span id="cb49-4"><a href="introducción-a-r.html#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="introducción-a-r.html#cb49-5" aria-hidden="true" tabindex="-1"></a>Resumen <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(</span>
<span id="cb49-6"><a href="introducción-a-r.html#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">names_from =</span> Ambito, </span>
<span id="cb49-7"><a href="introducción-a-r.html#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">values_from =</span>  Total_localidades</span>
<span id="cb49-8"><a href="introducción-a-r.html#cb49-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 16 × 3
##    NOM_MUN                Rural Urbano
##    &lt;chr&gt;                  &lt;int&gt;  &lt;int&gt;
##  1 Álvaro Obregón             3      1
##  2 La Magdalena Contreras     8      1
##  3 Cuajimalpa de Morelos     14      2
##  4 Tláhuac                   31      5
##  5 Xochimilco                78      1
##  6 Tlalpan                   95      4
##  7 Milpa Alta               187     10
##  8 Azcapotzalco              NA      1
##  9 Benito Juárez             NA      1
## 10 Coyoacán                  NA      1
## 11 Cuauhtémoc                NA      1
## 12 Gustavo A. Madero         NA      1
## 13 Iztacalco                 NA      1
## 14 Iztapalapa                NA      1
## 15 Miguel Hidalgo            NA      1
## 16 Venustiano Carranza       NA      1</code></pre>
<p>En la tabla actual existe ahora un y solo un registro por cada observación (nombre de municipio en este caso). El valor que le corresponde a cada una de las columnas creadas es la frecuencia absoluta de localidades que tienen la característica “Rural” y “Urbano” respectivamente.</p>
<p>Pero… ¿qué pasa cuando no existen todos los valores en ambas columnas? Si no se especifica la manera de llenar los datos faltantes, estos contendrán NAs. Siempre se puede elegir el caracter o número con el cual se imputan los datos faltantes.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="introducción-a-r.html#cb51-1" aria-hidden="true" tabindex="-1"></a>fish_encounters <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="introducción-a-r.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> station, <span class="at">values_from =</span> seen)</span></code></pre></div>
<pre><code>## # A tibble: 19 × 12
##    fish  Release I80_1 Lisbon  Rstr Base_TD   BCE   BCW  BCE2  BCW2   MAE   MAW
##    &lt;fct&gt;   &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 4842        1     1      1     1       1     1     1     1     1     1     1
##  2 4843        1     1      1     1       1     1     1     1     1     1     1
##  3 4844        1     1      1     1       1     1     1     1     1     1     1
##  4 4845        1     1      1     1       1    NA    NA    NA    NA    NA    NA
##  5 4847        1     1      1    NA      NA    NA    NA    NA    NA    NA    NA
##  6 4848        1     1      1     1      NA    NA    NA    NA    NA    NA    NA
##  7 4849        1     1     NA    NA      NA    NA    NA    NA    NA    NA    NA
##  8 4850        1     1     NA     1       1     1     1    NA    NA    NA    NA
##  9 4851        1     1     NA    NA      NA    NA    NA    NA    NA    NA    NA
## 10 4854        1     1     NA    NA      NA    NA    NA    NA    NA    NA    NA
## 11 4855        1     1      1     1       1    NA    NA    NA    NA    NA    NA
## 12 4857        1     1      1     1       1     1     1     1     1    NA    NA
## 13 4858        1     1      1     1       1     1     1     1     1     1     1
## 14 4859        1     1      1     1       1    NA    NA    NA    NA    NA    NA
## 15 4861        1     1      1     1       1     1     1     1     1     1     1
## 16 4862        1     1      1     1       1     1     1     1     1    NA    NA
## 17 4863        1     1     NA    NA      NA    NA    NA    NA    NA    NA    NA
## 18 4864        1     1     NA    NA      NA    NA    NA    NA    NA    NA    NA
## 19 4865        1     1      1    NA      NA    NA    NA    NA    NA    NA    NA</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="introducción-a-r.html#cb53-1" aria-hidden="true" tabindex="-1"></a>fish_encounters <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="introducción-a-r.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> station, <span class="at">values_from =</span> seen, <span class="at">values_fill =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 19 × 12
##    fish  Release I80_1 Lisbon  Rstr Base_TD   BCE   BCW  BCE2  BCW2   MAE   MAW
##    &lt;fct&gt;   &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1 4842        1     1      1     1       1     1     1     1     1     1     1
##  2 4843        1     1      1     1       1     1     1     1     1     1     1
##  3 4844        1     1      1     1       1     1     1     1     1     1     1
##  4 4845        1     1      1     1       1     0     0     0     0     0     0
##  5 4847        1     1      1     0       0     0     0     0     0     0     0
##  6 4848        1     1      1     1       0     0     0     0     0     0     0
##  7 4849        1     1      0     0       0     0     0     0     0     0     0
##  8 4850        1     1      0     1       1     1     1     0     0     0     0
##  9 4851        1     1      0     0       0     0     0     0     0     0     0
## 10 4854        1     1      0     0       0     0     0     0     0     0     0
## 11 4855        1     1      1     1       1     0     0     0     0     0     0
## 12 4857        1     1      1     1       1     1     1     1     1     0     0
## 13 4858        1     1      1     1       1     1     1     1     1     1     1
## 14 4859        1     1      1     1       1     0     0     0     0     0     0
## 15 4861        1     1      1     1       1     1     1     1     1     1     1
## 16 4862        1     1      1     1       1     1     1     1     1     0     0
## 17 4863        1     1      0     0       0     0     0     0     0     0     0
## 18 4864        1     1      0     0       0     0     0     0     0     0     0
## 19 4865        1     1      1     0       0     0     0     0     0     0     0</code></pre>
<p><strong>Ejercicio:</strong></p>
<ol style="list-style-type: decimal">
<li><p>Realiza un pivote horizontal a través del ámbito y el total de localidades.</p></li>
<li><p>Rellena los datos faltantes con ceros.</p></li>
</ol>
<p>En caso de que existan múltiples columnas que se desean dispersar mediante el pivote de una columna con múltiples categorías, es posible especificar tal re estructuración a través del siguiente código.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="introducción-a-r.html#cb55-1" aria-hidden="true" tabindex="-1"></a>us_rent_income <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(NAME)</span></code></pre></div>
<pre><code>## # A tibble: 104 × 5
##    GEOID NAME       variable estimate   moe
##    &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 01    Alabama    income      24476   136
##  2 01    Alabama    rent          747     3
##  3 02    Alaska     income      32940   508
##  4 02    Alaska     rent         1200    13
##  5 04    Arizona    income      27517   148
##  6 04    Arizona    rent          972     4
##  7 05    Arkansas   income      23789   165
##  8 05    Arkansas   rent          709     5
##  9 06    California income      29454   109
## 10 06    California rent         1358     3
## # ℹ 94 more rows</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="introducción-a-r.html#cb57-1" aria-hidden="true" tabindex="-1"></a>us_rent_income <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="introducción-a-r.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> <span class="fu">c</span>(estimate, moe))</span></code></pre></div>
<pre><code>## # A tibble: 52 × 6
##    GEOID NAME                 estimate_income estimate_rent moe_income moe_rent
##    &lt;chr&gt; &lt;chr&gt;                          &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
##  1 01    Alabama                        24476           747        136        3
##  2 02    Alaska                         32940          1200        508       13
##  3 04    Arizona                        27517           972        148        4
##  4 05    Arkansas                       23789           709        165        5
##  5 06    California                     29454          1358        109        3
##  6 08    Colorado                       32401          1125        109        5
##  7 09    Connecticut                    35326          1123        195        5
##  8 10    Delaware                       31560          1076        247       10
##  9 11    District of Columbia           43198          1424        681       17
## 10 12    Florida                        25952          1077         70        3
## # ℹ 42 more rows</code></pre>
<p><strong>Ejercicio:</strong></p>
<ol style="list-style-type: decimal">
<li><p>Agrupa los datos de localidades por ámbito</p></li>
<li><p>Agrega una columna con el porcentaje de localidades por alcaldía</p></li>
<li><p>Realiza un pivote horizontal sobre el ámbito y las variables numéricas de total de localidades y su respectivo porcentaje creado en el paso anterior</p></li>
<li><p>Ordena los registros de forma descendente de acuerdo con el total de localidades rural y urbano.</p></li>
</ol>
<p>Adicionalmente, se puede especificar una función de agregación que operara antes de acomodar los datos en las respectivas columnas indicadas. Un ejemplo de funciones agregadas en la re estructuración de tabla se muestra a continuación, donde se muestra la media de los valores en las categorías <em>tension</em> y <em>breaks</em>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="introducción-a-r.html#cb59-1" aria-hidden="true" tabindex="-1"></a>warpbreaks <span class="ot">&lt;-</span> warpbreaks[<span class="fu">c</span>(<span class="st">&quot;wool&quot;</span>, <span class="st">&quot;tension&quot;</span>, <span class="st">&quot;breaks&quot;</span>)] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb59-2"><a href="introducción-a-r.html#cb59-2" aria-hidden="true" tabindex="-1"></a>warpbreaks</span></code></pre></div>
<pre><code>## # A tibble: 54 × 3
##    wool  tension breaks
##    &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt;
##  1 A     L           26
##  2 A     L           30
##  3 A     L           54
##  4 A     L           25
##  5 A     L           70
##  6 A     L           52
##  7 A     L           51
##  8 A     L           26
##  9 A     L           67
## 10 A     M           18
## # ℹ 44 more rows</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="introducción-a-r.html#cb61-1" aria-hidden="true" tabindex="-1"></a>warpbreaks <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="introducción-a-r.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb61-3"><a href="introducción-a-r.html#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> wool,</span>
<span id="cb61-4"><a href="introducción-a-r.html#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> breaks,</span>
<span id="cb61-5"><a href="introducción-a-r.html#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_fn =</span> <span class="sc">~</span><span class="fu">mean</span>(.x, <span class="at">na.rm =</span> T)</span>
<span id="cb61-6"><a href="introducción-a-r.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   tension     A     B
##   &lt;fct&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1 L        44.6  28.2
## 2 M        24    28.8
## 3 H        24.6  18.8</code></pre>
<p><strong>Ejercicio:</strong></p>
<ol style="list-style-type: decimal">
<li><p>Sobre el conjunto de localidades crea una variable con 5 categorías numéricas creadas aleatoriamente.</p></li>
<li><p>Elimina la columna con el nombre del municipio.</p></li>
<li><p>Crea un pivote horizontal con el ámbito, sumando el total de localidades y rellenando con ceros los datos faltantes.</p></li>
<li><p>Ordena las categorías numéricas de forma ascendente.</p></li>
</ol>
</div>
<div id="pivote-vertical" class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Pivote vertical<a href="introducción-a-r.html#pivote-vertical" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>pivot_longer()</em> es podría ser la función inversa de la anterior, se necesita comúnmente para ordenar los conjuntos de datos capturados en crudo, ya que a menudo no son capturados acorde a las mejores estructuras para facilitar el análisis.</p>
<p>El conjunto de datos <em>relig_income</em> almacena recuentos basados en una encuesta que (entre otras cosas) preguntó a las personas sobre su religión e ingresos anuales:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="introducción-a-r.html#cb63-1" aria-hidden="true" tabindex="-1"></a>relig_income</span></code></pre></div>
<pre><code>## # A tibble: 18 × 11
##    religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k`
##    &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1 Agnostic      27        34        60        81        76       137        122
##  2 Atheist       12        27        37        52        35        70         73
##  3 Buddhist      27        21        30        34        33        58         62
##  4 Catholic     418       617       732       670       638      1116        949
##  5 Don’t k…      15        14        15        11        10        35         21
##  6 Evangel…     575       869      1064       982       881      1486        949
##  7 Hindu          1         9         7         9        11        34         47
##  8 Histori…     228       244       236       238       197       223        131
##  9 Jehovah…      20        27        24        24        21        30         15
## 10 Jewish        19        19        25        25        30        95         69
## 11 Mainlin…     289       495       619       655       651      1107        939
## 12 Mormon        29        40        48        51        56       112         85
## 13 Muslim         6         7         9        10         9        23         16
## 14 Orthodox      13        17        23        32        32        47         38
## 15 Other C…       9         7        11        13        13        14         18
## 16 Other F…      20        33        40        46        49        63         46
## 17 Other W…       5         2         3         4         2         7          3
## 18 Unaffil…     217       299       374       365       341       528        407
## # ℹ 3 more variables: `$100-150k` &lt;dbl&gt;, `&gt;150k` &lt;dbl&gt;,
## #   `Don&#39;t know/refused` &lt;dbl&gt;</code></pre>
<p>¿Crees que ésta es la mejor estructura para la tabla? ¿Cómo imaginas que podría modificarse?</p>
<p>Este conjunto de datos contiene tres variables:</p>
<ol style="list-style-type: decimal">
<li><p>religión, almacenada en las filas</p></li>
<li><p>income repartidos entre los nombres de columna</p></li>
<li><p>count almacenado en los valores de las celdas.</p></li>
</ol>
<p>Para ordenarlo usamos <em>pivot_longer()</em>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="introducción-a-r.html#cb65-1" aria-hidden="true" tabindex="-1"></a>relig_income <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="introducción-a-r.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>religion, <span class="at">names_to =</span> <span class="st">&quot;income&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 180 × 3
##    religion income             count
##    &lt;chr&gt;    &lt;chr&gt;              &lt;dbl&gt;
##  1 Agnostic &lt;$10k                 27
##  2 Agnostic $10-20k               34
##  3 Agnostic $20-30k               60
##  4 Agnostic $30-40k               81
##  5 Agnostic $40-50k               76
##  6 Agnostic $50-75k              137
##  7 Agnostic $75-100k             122
##  8 Agnostic $100-150k            109
##  9 Agnostic &gt;150k                 84
## 10 Agnostic Don&#39;t know/refused    96
## # ℹ 170 more rows</code></pre>
<ul>
<li><p>El primer argumento es el conjunto de datos para remodelar, relig_income.</p></li>
<li><p>El segundo argumento describe qué columnas necesitan ser reformadas. En este caso, es cada columna aparte de religion.</p></li>
<li><p>El <strong>names_to</strong> da el nombre de la variable que se creará a partir de los datos almacenados en los nombres de columna, es decir, ingresos.</p></li>
<li><p>Los <strong>values_to</strong> dan el nombre de la variable que se creará a partir de los datos almacenados en el valor de la celda, es decir, count. Ni la columna names_to ni la values_to existen en relig_income, por lo que las proporcionamos como cadenas de caracteres entre comillas.</p></li>
</ul>
</div>
<div id="unión-de-columnas" class="section level3 hasAnchor" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Unión de columnas<a href="introducción-a-r.html#unión-de-columnas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Es común que en los conjuntos de datos exista información esparcida en distintas columnas que sería deseable <strong>(en muy pocas ocasiones)</strong> tenerlas en una sola columna. Algunos ejemplos de esta situación deseable son las fechas y claves geoestadísticas. La función <em>unite()</em> sirve para <strong>concatenar el contenido de columnas</strong> mediante un separador elegible.</p>
<p>Se usará la variable de la clave geoestadística de localidades del país como ejemplo.</p>
<p>El formato para las claves geoestadísticas para estado, municipio y localidad son claves alfanuméricas que contienen 2, 3 y 4 caracteres respectivamente. Es indispensable que al trabajar con claves geoestadísticas, las claves estén en su formato original. A continuación se hará la homologación de las claves para usar la función <em>unite()</em>.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="introducción-a-r.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb67-2"><a href="introducción-a-r.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb67-3"><a href="introducción-a-r.html#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb67-4"><a href="introducción-a-r.html#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="introducción-a-r.html#cb67-5" aria-hidden="true" tabindex="-1"></a>Datos <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/Margin CONAPO.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Margin CONAPO&quot;</span>)</span>
<span id="cb67-6"><a href="introducción-a-r.html#cb67-6" aria-hidden="true" tabindex="-1"></a>Datos</span></code></pre></div>
<pre><code>## # A tibble: 107,458 × 21
##      ENT NOM_ENT         MUN NOM_MUN   LOC NOM_LOC POB_TOT    VPH ANAL10 SPRIM10
##    &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1     1 Aguascalient…     1 Aguasc…     1 Aguasc…  722250 184123   2.26   10.9 
##  2     1 Aguascalient…     1 Aguasc…    96 Agua A…      37     11  17.9    48.1 
##  3     1 Aguascalient…     1 Aguasc…   104 Ardill…      14      3   0      20   
##  4     1 Aguascalient…     1 Aguasc…   106 Arella…    1382    255   5.60   24.7 
##  5     1 Aguascalient…     1 Aguasc…   112 Bajío …      55     11  14.3    38.1 
##  6     1 Aguascalient…     1 Aguasc…   114 Reside…     757    202   0       1.63
##  7     1 Aguascalient…     1 Aguasc…   120 Buenav…     935    217  10.7    29.5 
##  8     1 Aguascalient…     1 Aguasc…   121 Cabeci…     184     44   4.55   32.6 
##  9     1 Aguascalient…     1 Aguasc…   125 Cañada…     395     82   8.86   23.9 
## 10     1 Aguascalient…     1 Aguasc…   126 Cañada…     509    123   4.75   19.6 
## # ℹ 107,448 more rows
## # ℹ 11 more variables: SEXC10 &lt;dbl&gt;, SEE10 &lt;dbl&gt;, SAGUAE10 &lt;dbl&gt;,
## #   PROM_OCC10 &lt;dbl&gt;, PISOTIE10 &lt;dbl&gt;, SREFRI10 &lt;dbl&gt;, IM_2010 &lt;dbl&gt;,
## #   GM_2010 &lt;chr&gt;, IMC0A100 &lt;dbl&gt;, LUG_NAL &lt;dbl&gt;, LUG_EDO &lt;dbl&gt;</code></pre>
<p>Como puede apreciarse en la tabla anterior, las claves de los campos <em>Ent</em>, <em>Mun</em> y <em>Loc</em> aparecen como numéricos. La estructura deseada para estos campos es de tipo alfanumérico y de longitud 2, 3 y 4 respectivamente. Para lograr esta estructura de datos, es necesario concatenar tantos ceros como sean necesarios antes del valor actual hasta lograr la longitud deseada.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="introducción-a-r.html#cb69-1" aria-hidden="true" tabindex="-1"></a>Datos2 <span class="ot">&lt;-</span> Datos <span class="sc">%&gt;%</span> <span class="fu">select</span>(ENT, MUN, LOC)</span>
<span id="cb69-2"><a href="introducción-a-r.html#cb69-2" aria-hidden="true" tabindex="-1"></a>Datos2<span class="sc">$</span>ENT <span class="sc">%&lt;&gt;%</span> <span class="fu">str_pad</span>(<span class="at">width =</span> <span class="dv">2</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>)</span>
<span id="cb69-3"><a href="introducción-a-r.html#cb69-3" aria-hidden="true" tabindex="-1"></a>Datos2<span class="sc">$</span>MUN <span class="sc">%&lt;&gt;%</span> <span class="fu">str_pad</span>(<span class="at">width =</span> <span class="dv">3</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>)</span>
<span id="cb69-4"><a href="introducción-a-r.html#cb69-4" aria-hidden="true" tabindex="-1"></a>Datos2<span class="sc">$</span>LOC <span class="sc">%&lt;&gt;%</span> <span class="fu">str_pad</span>(<span class="at">width =</span> <span class="dv">4</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>, <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>)</span>
<span id="cb69-5"><a href="introducción-a-r.html#cb69-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-6"><a href="introducción-a-r.html#cb69-6" aria-hidden="true" tabindex="-1"></a>Datos2 <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   ENT   MUN   LOC  
##   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 01    001   0001 
## 2 01    001   0096 
## 3 01    001   0104 
## 4 01    001   0106 
## 5 01    001   0112</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="introducción-a-r.html#cb71-1" aria-hidden="true" tabindex="-1"></a>Datos2 <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="introducción-a-r.html#cb71-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">unite</span>(<span class="st">&quot;CVE_GEO&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;ENT&quot;</span>,<span class="st">&quot;MUN&quot;</span>,<span class="st">&quot;LOC&quot;</span>), <span class="at">sep=</span><span class="st">&quot;&quot;</span>, <span class="at">remove =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb71-3"><a href="introducción-a-r.html#cb71-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   CVE_GEO   ENT   MUN   LOC  
##   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 010010001 01    001   0001 
## 2 010010096 01    001   0096 
## 3 010010104 01    001   0104 
## 4 010010106 01    001   0106 
## 5 010010112 01    001   0112</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="introducción-a-r.html#cb73-1" aria-hidden="true" tabindex="-1"></a>Datos2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="introducción-a-r.html#cb73-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">unite</span>(<span class="st">&quot;CVE_GEO&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;ENT&quot;</span>,<span class="st">&quot;MUN&quot;</span>,<span class="st">&quot;LOC&quot;</span>), <span class="at">sep=</span><span class="st">&quot;/&quot;</span>,<span class="at">remove =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb73-3"><a href="introducción-a-r.html#cb73-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 1
##   CVE_GEO    
##   &lt;chr&gt;      
## 1 01/001/0001
## 2 01/001/0096
## 3 01/001/0104
## 4 01/001/0106
## 5 01/001/0112</code></pre>
<p>En el código anterior se carga la librería <em>magrittr</em> para poder hacer uso del operador pipe doble “%&lt;&gt;%”, que permite al igual que el operador pipe simple “%&gt;%”, usar como argumento al primer elemento y mandarlo hacia la función definida, además de guardar el resultado final de la cadena de pipes en el argumento original que fue usado como insumo para la función. Es importante tener en cuenta que el dato será reescrito y no se podrá tener acceso a su información almacenada antes de ser usado el operador.</p>
<p>Es opción del programador poder eliminar las variables originales que crearon la nueva variable o mantenerlas en el conjunto de datos. Esta opción está disponible en el parámetro <em>remove</em> de la función <em>unite()</em>.</p>
</div>
<div id="separador-de-columnas" class="section level3 hasAnchor" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Separador de columnas<a href="introducción-a-r.html#separador-de-columnas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Los procesos que se han visto hasta ahora han tenido cada uno una función inversa, este es también el caso de la función <em>unite</em> que tiene por objetivo unir dos o más columnas en una. La función <em>separate()</em> separará una columna en dos o más dependiendo de la longitud que tenga y de las especificaciones de separación.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="introducción-a-r.html#cb75-1" aria-hidden="true" tabindex="-1"></a>Datos_unite1 <span class="ot">&lt;-</span> Datos2 <span class="sc">%&gt;%</span> <span class="fu">unite</span>(<span class="st">&quot;CVE_GEO&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;ENT&quot;</span>,<span class="st">&quot;MUN&quot;</span>,<span class="st">&quot;LOC&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;&quot;</span>, <span class="at">remove =</span> T) </span>
<span id="cb75-2"><a href="introducción-a-r.html#cb75-2" aria-hidden="true" tabindex="-1"></a>Datos_unite1 <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>) </span></code></pre></div>
<pre><code>## # A tibble: 5 × 1
##   CVE_GEO  
##   &lt;chr&gt;    
## 1 010010001
## 2 010010096
## 3 010010104
## 4 010010106
## 5 010010112</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="introducción-a-r.html#cb77-1" aria-hidden="true" tabindex="-1"></a>Datos_unite1 <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="introducción-a-r.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="st">&quot;CVE_GEO&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;EDO&quot;</span>,<span class="st">&quot;MUNI&quot;</span>,<span class="st">&quot;LOC&quot;</span>), <span class="at">sep =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>), <span class="at">remove=</span>F) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="introducción-a-r.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   CVE_GEO   EDO   MUNI  LOC  
##   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 010010001 01    001   0001 
## 2 010010096 01    001   0096 
## 3 010010104 01    001   0104 
## 4 010010106 01    001   0106 
## 5 010010112 01    001   0112</code></pre>
<p>Ya sea que se le especifique el número de caracteres que debe de contar para hacer un corte o que se le indique qué caracter debe identificar para hacer la separación, la función <em>separate()</em> puede dividir la columna indicada y crear nuevas a partir de la original.</p>
<div class="watermark">
<img src="img/header.png" width="400">
</div>

<div class="watermark">
<p><img src="img/header.png" width="400"/></p>
</div>
</div>
</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

$('.pipehover_incremental tr').hover(function() {
  $(this).removeClass()
  $(this).prevAll().removeClass()
  $(this).nextAll().removeClass()
  $(this).addClass('hover');
  $(this).prevAll().addClass('hover');
  $(this).closest('div').next().find('img').attr("src", $(this).attr("link"));
});


$('.pipehover_select_one_row tr').hover(function() {
  $(this).removeClass()
  $(this).prevAll().removeClass()
  $(this).nextAll().removeClass()
  $(this).addClass('hover');
  $(this).closest('div').next().find('img').attr("src", $(this).attr("link"));
});

</script>
            </section>

          </div>
        </div>
      </div>
<a href="conceptos-de-ciencia-de-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualización.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["intro2_ds_ml_r.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
